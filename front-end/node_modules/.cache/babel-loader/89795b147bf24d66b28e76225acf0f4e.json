{"ast":null,"code":"var _jsxFileName = \"/home/manuel/git/BookflixOficialDonna/bf/front-end/src/components/RegistrarSuscriptor.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Redirect } from 'react-router-dom';\nimport Navegacion from './Navegacion';\nimport DatePicker from '../../node_modules/react-datepicker';\nimport './styles/cargarsuscriptor.css';\nconst cargar = 'http://localhost:4000/api/suscriptores/registrar';\n\nclass RegistrarSuscriptor extends Component {\n  constructor() {\n    super();\n\n    this.onInputChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.setPremium = () => {\n      this.setState({\n        suscripcion: \"PREMIUM\"\n      });\n    };\n\n    this.setRegular = () => {\n      this.setState({\n        suscripcion: \"REGULAR\"\n      });\n    };\n\n    this.getErrors = err => {\n      const {\n        data\n      } = err;\n      const {\n        nombre,\n        email,\n        password,\n        password2\n      } = data;\n      const error = [nombre, email, password, password2];\n      this.setState({\n        errors: error\n      });\n      error.map(err => {\n        if (!err === '') alert(err);\n      });\n    };\n\n    this.getToken = async res => {\n      console.log(\"Atencion Maderfaqer\", res.data);\n      const {\n        user,\n        token,\n        soyAdmin,\n        suscriptor\n      } = res.data;\n      sessionStorage.setItem('suscriptorInfo', suscriptor);\n      sessionStorage.setItem('token', token);\n      sessionStorage.setItem('tokenSuscriptor', token);\n      sessionStorage.setItem('user', suscriptor);\n      sessionStorage.setItem('soyAdmin', soyAdmin);\n      this.setState({\n        token,\n        user,\n        soyAdmin\n      });\n    };\n\n    this.state = {\n      nombre: '',\n      email: '',\n      password: '',\n      password2: '',\n      dni: '',\n      suscripcion: '',\n      numT: '',\n      codT: '',\n      añoE: '',\n      mesE: '',\n      token: '',\n      user: null,\n      errors: []\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.cargarSuscriptor = this.cargarSuscriptor.bind(this);\n    this.onInputChange = this.onInputChange.bind(this);\n    this.getToken = this.getToken.bind(this);\n    this.getErrors = this.getErrors.bind(this);\n  }\n\n  handleChange(event) {\n    const {\n      name,\n      value\n    } = event.target;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  async cargarSuscriptor(event) {\n    event.preventDefault();\n\n    if (this.state.numT.length != 16) {\n      return alert('Pruebe con una tarjeta que contenga 16 dígitos');\n    } else if (this.state.codT.length != 3) {\n      return alert('Ingrese un código de seguridad de 3 dígitos');\n    }\n\n    var aux = parseInt(this.state.añoE);\n\n    if (this.state.añoE.length == 2) {\n      if (aux == 20) {\n        var aux2 = parseInt(this.state.mesE);\n\n        if (aux2 < 5) {\n          return alert('Ingrese una tarjeta que no esté vencida');\n        }\n      } else if (aux < 20) {\n        return alert('Ingrese una tarjeta que no esté vencida');\n      }\n    } else if (this.state.añoE.length == 4) {\n      if (aux == 2020) {\n        var aux2 = parseInt(this.state.mesE);\n\n        if (aux2 < 5) {\n          return alert('Ingrese una tarjeta que no esté vencida');\n        }\n      } else if (aux < 2020) {\n        return alert('Ingrese una tarjeta que no esté vencida');\n      }\n    }\n\n    await axios.post(cargar, {\n      nombre: this.state.nombre,\n      email: this.state.email,\n      password: this.state.password,\n      password2: this.state.password2,\n      suscripcion: this.state.suscripcion,\n      dni: this.state.dni,\n      numT: this.state.numT,\n      codT: this.state.codT\n    }).then(res => {\n      this.getToken(res);\n    }).catch(err => {\n      alert(JSON.stringify(err.response.data.msg));\n    });\n  }\n\n  render() {\n    return !this.state.token && !this.state.user ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"script\", {\n      src: \"https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Navegacion, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-novedad\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 offset-md-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cardRS card-body text-light bg-dark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.cargarSuscriptor,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }\n    }, \"Registrate\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }\n    }, \"Nombre\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"nombre\",\n      name: \"nombre\",\n      onChange: this.onInputChange,\n      value: this.state.nombre,\n      placeholder: \"Ingrese su nombre\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"email\",\n      name: \"email\",\n      onChange: this.onInputChange,\n      value: this.state.email,\n      required: true,\n      placeholder: \"Ingrese un email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 17\n      }\n    }, \"Contrase\\xF1a\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      id: \"password\",\n      name: \"password\",\n      onChange: this.onInputChange,\n      value: this.state.password,\n      placeholder: \"Ingrese una contrase\\xF1a\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 17\n      }\n    }, \"Confirmaci\\xF3n de contrase\\xF1a\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      id: \"password2\",\n      name: \"password2\",\n      onChange: this.onInputChange,\n      value: this.state.password2,\n      required: true,\n      placeholder: \"Vuelva a ingresar su contrase\\xF1a\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 17\n      }\n    }, \"DNI del titular de la tarjeta\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"dni\",\n      name: \"dni\",\n      onChange: this.onInputChange,\n      value: this.state.dni,\n      placeholder: \"Ingrese su DNI\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"btn-group btn-group-toggle\",\n      \"data-toggle\": \"buttons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 25\n      }\n    }, \"Tipo de Suscripci\\xF3n \"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"checkbox\",\n      class: \"btn btn-danger\",\n      onClick: this.setRegular,\n      name: \"suscripcion\",\n      value: \"REGULAR\",\n      \"data-toggle\": \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 25\n      }\n    }, \" REGULAR\"), \" \", \" \", /*#__PURE__*/React.createElement(\"button\", {\n      type: \"checkbox\",\n      class: \"btn btn-danger\",\n      onClick: this.setPremium,\n      name: \"suscripcion\",\n      value: \"PREMIUM\",\n      \"data-toggle\": \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 25\n      }\n    }, \" PREMIUM\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 17\n      }\n    }, \"N\\xFAmero de tarjeta\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      className: \"form-control\",\n      id: \"numT\",\n      name: \"numT\",\n      onChange: this.onInputChange,\n      value: this.state.numT,\n      required: true,\n      placeholder: \"Ingrese n\\xFAmero de tarjeta, deber\\xE1 contener 16 digitos\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 17\n      }\n    }, \"Codigo De Tarjeta\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      className: \"form-control\",\n      id: \"codT\",\n      name: \"codT\",\n      onChange: this.onInputChange,\n      value: this.state.codT,\n      required: true,\n      placeholder: \"Ingrese el codigo de su tajeta, deber\\xE1 contener 3 d\\xEDgitos\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 17\n      }\n    }, \"Fecha de expiracion\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      className: \"form-control\",\n      id: \"mesE\",\n      name: \"mesE\",\n      onChange: this.onInputChange,\n      value: this.state.mesE,\n      required: true,\n      placeholder: \"MES\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      className: \"form-control\",\n      id: \"a\\xF1oE\",\n      name: \"a\\xF1oE\",\n      onChange: this.onInputChange,\n      value: this.state.añoE,\n      required: true,\n      placeholder: \"A\\xD1O\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-danger btn-lg btn-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 17\n      }\n    }, \"Suscribirse\"))))))) : /*#__PURE__*/React.createElement(Redirect, {\n      from: \"/singup\",\n      to: \"/homeperfiles\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 10\n      }\n    });\n  }\n\n}\n\nexport default RegistrarSuscriptor;","map":{"version":3,"sources":["/home/manuel/git/BookflixOficialDonna/bf/front-end/src/components/RegistrarSuscriptor.js"],"names":["React","Component","axios","Redirect","Navegacion","DatePicker","cargar","RegistrarSuscriptor","constructor","onInputChange","event","setState","target","name","value","setPremium","suscripcion","setRegular","getErrors","err","data","nombre","email","password","password2","error","errors","map","alert","getToken","res","console","log","user","token","soyAdmin","suscriptor","sessionStorage","setItem","state","dni","numT","codT","añoE","mesE","handleChange","bind","cargarSuscriptor","preventDefault","length","aux","parseInt","aux2","post","then","catch","JSON","stringify","response","msg","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport { Redirect } from 'react-router-dom';\nimport Navegacion from './Navegacion';\nimport DatePicker from '../../node_modules/react-datepicker';\nimport './styles/cargarsuscriptor.css';\n\nconst cargar = 'http://localhost:4000/api/suscriptores/registrar';\n\nclass RegistrarSuscriptor extends Component {\n    \n    constructor (){\n        super();\n        this.state = {\n            nombre: '', \n            email: '',\n            password:'',\n            password2:'',\n            dni:'',\n            suscripcion:'',\n            numT:'',\n            codT:'',\n            añoE:'',\n            mesE:'',\n            token:'',\n            user: null,\n            errors:[],\n           \n        };\n        this.handleChange = this.handleChange.bind(this);\n        this.cargarSuscriptor = this.cargarSuscriptor.bind(this);\n        this.onInputChange = this.onInputChange.bind(this);\n        this.getToken = this.getToken.bind(this);\n        this.getErrors = this.getErrors.bind(this);\n        \n    }\n\n    handleChange(event) {\n        const { name, value } = event.target;\n        this.setState({\n            [name]: value\n        });\n    }    \n\n    onInputChange = (event) => {\n        this.setState({\n            [event.target.name]: event.target.value\n        })\n    };\n\n    setPremium = () => {\n        this.setState({\n            suscripcion: \"PREMIUM\"\n        })\n    }\n    setRegular= () => {\n        this.setState({\n            suscripcion: \"REGULAR\"\n        })\n    }\n\n\n    \n  \n    getErrors=(err)=>{\n      \n        const {data} = err;\n        \n        const {nombre , email, password , password2}=data; \n        \n        const error = [nombre , email, password , password2]; \n\n        \n        this.setState(\n            {errors:error}\n        )\n        error.map(err=>{\n            if(! err === '') \n                alert(err);\n        } );\n        \n        \n    }\n    \n\n  \n\n    async cargarSuscriptor(event){\n        \n        event.preventDefault();  \n\n        if (this.state.numT.length != 16){\n            return alert('Pruebe con una tarjeta que contenga 16 dígitos')\n        }\n        else if (this.state.codT.length != 3){\n            return alert('Ingrese un código de seguridad de 3 dígitos')\n        }\n        var aux = parseInt(this.state.añoE);\n\n        if(this.state.añoE.length == 2){\n            if(aux == 20 ){\n                var aux2 = parseInt(this.state.mesE);\n                if(aux2 < 5){\n                    return alert('Ingrese una tarjeta que no esté vencida')\n                }\n            }else if (aux < 20){\n                return alert('Ingrese una tarjeta que no esté vencida')\n            }\n       \n        }else if(this.state.añoE.length == 4){\n            \n            if(aux == 2020){\n                var aux2 = parseInt(this.state.mesE);\n                if(aux2 < 5){\n                    return alert('Ingrese una tarjeta que no esté vencida')\n                }\n            } else if (aux < 2020){\n                return alert('Ingrese una tarjeta que no esté vencida')\n            }\n        }\n\n        await axios.post(cargar,{\n            nombre:this.state.nombre ,\n            email: this.state.email,\n            password:this.state.password,\n            password2:this.state.password2,\n            suscripcion:this.state.suscripcion,\n            dni:this.state.dni,\n            numT:this.state.numT,\n            codT:this.state.codT,\n        })\n        .then(res => {\n        \n            this.getToken(res)})\n        .catch(err => {\n           alert(JSON.stringify(err.response.data.msg))\n          \n        });\n\n    }\n\n    getToken = async (res) => {\n        console.log(\"Atencion Maderfaqer\",res.data)\n        const { user, token, soyAdmin, suscriptor } = res.data;\n        sessionStorage.setItem('suscriptorInfo', suscriptor);\n        sessionStorage.setItem('token', token);\n        sessionStorage.setItem('tokenSuscriptor', token);\n        sessionStorage.setItem('user', suscriptor);\n        sessionStorage.setItem ('soyAdmin', soyAdmin );\n\n\n        this.setState({ token, user, soyAdmin});\n    };\n\n    render(){\n\n        return (\n           \n\n        !this.state.token && !this.state.user?\n\n        <div>  \n            <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js\"></script>\n            <Navegacion/>\n        <div className=\"form-novedad\" >\n        <div className=\"col-md-6 offset-md-3\">\n        <div className=\"cardRS card-body text-light bg-dark\">\n        \n        <form onSubmit={this.cargarSuscriptor} >\n        <div className=\"card-header\">\n\t\t\t\t    <h3>Registrate</h3>\n\t\t\t    </div>\n            <div className=\"form-group\">\n                <label className=\"text-light\">Nombre\n                </label>\n                <input \n                    className=\"form-control\" \n                    id=\"nombre\" \n                    name =\"nombre\"\n                    onChange={this.onInputChange}\n                    value={this.state.nombre}\n                    placeholder=\"Ingrese su nombre\"\n                    required>\n                </input>    \n            </div>\n            \n            <div className=\"form-group\">\n                <label className=\"text-light\">Email\n                </label>\n                <input \n                    className=\"form-control\" \n                    id=\"email\" \n                    name =\"email\"\n                    onChange={this.onInputChange}\n                    value={this.state.email}\n                    required\n                    placeholder=\"Ingrese un email\">\n                </input>    \n            </div>\n\n            <div className=\"form-group\">\n                <label className=\"text-light\">Contraseña</label>\n                <input type='password' className=\"form-control\" \n                    id=\"password\" \n                    name =\"password\"\n                    onChange={this.onInputChange}\n                    value={this.state.password}\n                    placeholder=\"Ingrese una contraseña\"\n                    required\n                ></input> \n            </div>\n\n            <div className=\"form-group\">\n                <label className=\"text-light\">Confirmación de contraseña</label>\n                <input type='password' className=\"form-control\" \n                    id=\"password2\" \n                    name =\"password2\"\n                    onChange={this.onInputChange}\n                    value={this.state.password2}\n                    required\n                    placeholder=\"Vuelva a ingresar su contraseña\"\n                ></input> \n            </div>\n\n            <div className=\"form-group\">\n                <label className=\"text-light\">DNI del titular de la tarjeta\n                </label>\n                <input \n                    className=\"form-control\" \n                    id=\"dni\" \n                    name =\"dni\"\n                    onChange={this.onInputChange}\n                    value={this.state.dni}\n                    placeholder=\"Ingrese su DNI\"\n                    required>\n                </input>    \n            </div>\n            \n            <div class=\"btn-group btn-group-toggle\" data-toggle=\"buttons\">\n                        <label className=\"text-light\">Tipo de Suscripción </label>\n                        <button type=\"checkbox\" class=\"btn btn-danger\" onClick={this.setRegular} name=\"suscripcion\" value=\"REGULAR\" data-toggle=\"button\"> REGULAR</button> {\" \"}\n                        <button type=\"checkbox\" class=\"btn btn-danger\"  onClick={this.setPremium} name=\"suscripcion\" value=\"PREMIUM\" data-toggle=\"button\"> PREMIUM</button>\n                </div>\n\n            \n\n            <div className=\"form-group\">\n                <label className=\"text-light\">Número de tarjeta\n                </label>\n                <input \n                    type=\"number\"\n                    className=\"form-control\" \n                    id=\"numT\" \n                    name =\"numT\"\n                    onChange={this.onInputChange}\n                    value={this.state.numT}\n                    required \n                    placeholder=\"Ingrese número de tarjeta, deberá contener 16 digitos\">\n                </input>    \n            </div>\n\n            <div className=\"form-group\">\n                <label className=\"text-light\">Codigo De Tarjeta\n                </label>\n                <input \n                    type=\"number\"\n                    className=\"form-control\" \n                    id=\"codT\" \n                    name =\"codT\"\n                    onChange={this.onInputChange}\n                    value={this.state.codT}\n                    required\n                   \n                    placeholder=\"Ingrese el codigo de su tajeta, deberá contener 3 dígitos\">\n                </input>    \n            </div>\n            <div className=\"form-group\">\n                <label className=\"text-light\">Fecha de expiracion\n                </label>\n                <input \n                    type=\"number\"\n                    className=\"form-control\" \n                    id=\"mesE\" \n                    name =\"mesE\"\n                    onChange={this.onInputChange}\n                    value={this.state.mesE}\n                    required\n                   \n                    placeholder=\"MES\">\n                </input>    \n            \n                <input \n                    type=\"number\"\n                    className=\"form-control\" \n                    id=\"añoE\" \n                    name =\"añoE\"\n                    onChange={this.onInputChange}\n                    value={this.state.añoE}\n                    required\n                   \n                    placeholder=\"AÑO\">\n                </input>    \n            </div>\n\n\n            <div className=\"form-group\">\n                <button  type=\"submit\" className=\"btn btn-danger btn-lg btn-block\"\n                        >\n                    Suscribirse\n                </button>\n            </div>\n                    \n    \n\n         </form>\n         </div>\n         </div>   \n         </div>\n         </div> \n         :\n         <Redirect\n         from=\"/singup\"\n         to=\"/homeperfiles\" />\n        )\n    }\n}\n\nexport default RegistrarSuscriptor;      "]},"metadata":{},"sourceType":"module"}