{"ast":null,"code":"var _jsxFileName = \"D:\\\\Documentos\\\\GitHub\\\\bookflix\\\\BookflixConDisenio\\\\front-end\\\\src\\\\components\\\\VistaSuscriptor\\\\Libros\\\\DetalleLibro.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport DatosLibro from \"./DatosLibro\";\nimport { Link } from \"react-router-dom\";\nimport ListarCapitulos from \"./ListarCapitulos\";\nimport { Button } from \"react-bootstrap\";\nimport MostrarTrailersAsociados from \"../Trailers/MostrarTrailersAsociados\";\nconst perfiles = \"http://localhost:4000/api/perfiles/\";\nconst editoriales = \"http://localhost:4000/api/editoriales/\";\nconst generos = \"http://localhost:4000/api/generos/\";\nconst autores = \"http://localhost:4000/api/autores/\";\nconst Trailers = \"http://localhost:4000/api/trailers/\";\nconst portada = \"http://localhost:4000/uploads/\";\nconst me = \"http://localhost:4000/api/libros/me\";\nconst terminado = \"http://localhost:4000/api/libros/terminado\";\nconst capi = \"http://localhost:4000/api/libros/misCapitulos\";\nexport default class DetalleLibrosAdmin extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getNombres = async () => {\n      //traigo el autor actual\n      await axios.post(autores + \"me\", {\n        id: this.state.libro.autor\n      }, {\n        headers: {\n          xaccess: this.state.token\n        }\n      }).then(res => {\n        console.log(res.data);\n        this.setState({\n          autor: res.data\n        });\n      }).catch(err => {\n        console.log(err);\n      }); //traigo el genero actual\n\n      await axios.post(generos + \"me\", {\n        id: this.state.libro.genero\n      }, {\n        headers: {\n          xaccess: this.state.token\n        }\n      }).then(res => {\n        console.log(res.data);\n        this.setState({\n          genero: res.data\n        });\n      }).catch(err => {\n        console.log(err);\n      }); //traigo la editorial actual\n\n      await axios.post(editoriales + \"me\", {\n        id: this.state.libro.editorial\n      }, {\n        headers: {\n          xaccess: this.state.token\n        }\n      }).then(res => {\n        this.setState({\n          editorial: res.data\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.getTrailer = async () => {\n      if (this.state.libro.trailer != null) {\n        await axios.post(Trailers + \"me\", {\n          id: this.state.libro.trailer\n        }, {\n          headers: {\n            xaccess: this.state.token\n          }\n        }).then(res => {\n          console.log(res.data);\n          console.log(res.data);\n          this.setState({\n            trailer: res.data\n          });\n        }).catch(err => {\n          console.log(err.response.data.msg);\n        });\n      }\n    };\n\n    this.getTermine = async () => {\n      await axios.post(terminado, {\n        id: this.state.id\n      }, {\n        headers: {\n          xaccess: this.state.token\n        }\n      }).then(res => {\n        console.log(res.data); //this.state.botonTermine = res.data;\n      }).catch(err => {\n        alert(JSON.stringify(err.response.data.msg));\n      });\n    };\n\n    this.getDatos = async () => {\n      await axios.post(me, {\n        id: this.state.id\n      }, {\n        headers: {\n          xaccess: this.state.token\n        }\n      }).then(res => {\n        this.setState({\n          libro: res.data,\n          capitulos: res.data.capitulos\n        });\n        this.getCapitulos();\n        this.getNombres();\n        this.HayCapitulos();\n        this.getTrailer();\n        this.getTermine();\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.filtrarCapitulos = capi => {\n      console.log(\"CAPITULOS ANTES DE FILTRARLOS\", capi);\n      var validos = [];\n      const hoy = JSON.stringify(new Date().getDate());\n      const mes = JSON.stringify(new Date().getMonth() + 1);\n      const año = JSON.stringify(new Date().getFullYear());\n      const hoyEntera = JSON.stringify(new Date());\n\n      if (capi != []) {\n        capi.map(cap => {\n          const lanzaHoy = JSON.stringify(new Date(cap.lanzamiento).getDate());\n          const lanzaMes = JSON.stringify(new Date(cap.lanzamiento).getMonth() + 1);\n          const lanzaAño = JSON.stringify(new Date(cap.lanzamiento).getFullYear());\n          const lanzaEntera = JSON.stringify(new Date(capi.lanzamiento));\n\n          if (hoy == lanzaHoy & mes == lanzaMes & año == lanzaAño || lanzaEntera > hoyEntera) {\n            if (cap.vencimiento) {\n              const venciHoy = JSON.stringify(new Date(cap.lanzamiento).getDate());\n              const venciMes = JSON.stringify(new Date(cap.lanzamiento).getMonth() + 1);\n              const venciAño = JSON.stringify(new Date(cap.lanzamiento).getFullYear());\n              const venciEntera = JSON.stringify(new Date(cap.vencimiento));\n\n              if (venciHoy == hoy & venciMes == mes & venciAño == año || venciEntera > hoyEntera) {\n                validos.push(cap);\n              }\n            } else {\n              validos.push(cap);\n            }\n          }\n        });\n        this.setState({\n          capitulosActivos: validos\n        });\n      }\n\n      console.log(\"CAPITULOS DESPUES DE FILTRARLOS\", this.state.capitulosActivos);\n    };\n\n    this.getCapitulos = async () => {\n      await axios.post(capi, {\n        id: this.props.match.params.id\n      }, {\n        headers: {\n          xaccess: this.state.token\n        }\n      }).then(res => {\n        this.setState({\n          capi: res.data\n        });\n        this.filtrarCapitulos(res.data);\n      }).catch(err => {\n        console.log(err);\n        alert(JSON.stringify(err.response.data.msg));\n      });\n    };\n\n    this.HayCapitulos = () => {\n      if (this.state.capitulos != \"\") {\n        this.state.bottonCap = true;\n      }\n    };\n\n    this.leerLibro = async () => {\n      console.log(this.state.bottonCap);\n      console.log(this.state.mostrarCapitulos);\n\n      if (this.state.bottonCap) {\n        console.log(\"entro en el true de botton\");\n      }\n\n      if (this.state.bottonCap) {\n        await axios.post(perfiles + \"visitadoLibro\", {\n          id: sessionStorage.getItem(\"perfilID\"),\n          libroId: this.state.id\n        }, {\n          headers: {\n            xaccess: this.state.token\n          }\n        }).then(res => {\n          console.log(res.data);\n        }).catch(err => {\n          console.log(err);\n          alert(JSON.stringify(err.response.data.msg));\n        });\n      }\n    };\n\n    this.fechaExpiracion = () => {\n      if (!this.props.libro.fechaExpiracion) {\n        return /*#__PURE__*/React.createElement(\"h6\", {\n          className: \"card-subtitle mb-2 text-muted\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 9\n          }\n        }, \"Fecha de expiraci\\xF3n: \", this.state.libro.expiracion);\n      } else {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 14\n          }\n        });\n      }\n    };\n\n    this.termineLibro = async () => {\n      await axios.post(perfiles + \"termineLibro\", {\n        id: sessionStorage.getItem(\"perfilID\"),\n        libroId: this.state.libro._id\n      }, {\n        headers: {\n          xaccess: this.state.token\n        }\n      }).then(res => {\n        alert(res.data.msg);\n      }).catch(err => {\n        alert(err.response.data.msg);\n      });\n    };\n\n    this.state = {\n      id: this.props.match.params.id,\n      token: sessionStorage.getItem(\"token\"),\n      libro: \"\",\n      capitulos: \"\",\n      editorial: \"\",\n      genero: \"\",\n      autor: \"\",\n      bottonCap: false,\n      mostrarCapitulos: false,\n      trailer: null,\n      capi: [],\n      capitulosActivos: [],\n      botonTermine: false\n    };\n    this.fechaExpiracion = this.fechaExpiracion.bind(this);\n    this.mostrarCapitulos = this.mostrarCapitulos.bind(this);\n  }\n\n  componentDidMount() {\n    this.getDatos();\n    this.HayCapitulos();\n  }\n\n  mostrarCapitulos() {\n    this.setState({\n      mostrarCapitulos: !this.state.mostrarCapitulos\n    });\n    console.log(this.state.mostrarCapitulos);\n  }\n\n  mostrarTermineLibro() {\n    if (this.state.botonTermine) {}\n  }\n\n  render() {\n    const show = this.state.bottonCap;\n    const termineL = this.state.botonTermine;\n    const capseleccionado = this.state.capseleccionado - 1;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(DatosLibro, {\n      libro: this.state.libro,\n      autor: this.state.autor,\n      genero: this.state.genero,\n      editorial: this.state.editorial,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 9\n      }\n    }), termineL ? /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-success col-md-2 offset-md-3 danger\",\n      onClick: this.termineLibro,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 15\n      }\n    }, \"Termine libro\")), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 13\n      }\n    })) : /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 11\n      }\n    }), show ? /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card col-md-6 offset-md-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-success\",\n      onClick: this.mostrarCapitulos,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 15\n      }\n    }, \" \", \"Ver Capitulos\")), this.state.mostrarCapitulos ? /*#__PURE__*/React.createElement(ListarCapitulos, {\n      capitulos: this.state.capitulosActivos,\n      libroId: this.state.libro._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 15\n      }\n    }) : /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 15\n      }\n    }, \" \")) : /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card col-md-6 offset-md-3 text-light bg-dark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"card-body \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      onClick: this.leerLibro,\n      className: \"btn btn-outline-success itemBoton\",\n      to: \"/suscriptor/libros/leer/\" + this.state.libro.archivo,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 19\n      }\n    }, \" \", \"Leer Libro\", \" \"))))), /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(MostrarTrailersAsociados, {\n      trailer: this.state.trailer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}","map":{"version":3,"sources":["D:/Documentos/GitHub/bookflix/BookflixConDisenio/front-end/src/components/VistaSuscriptor/Libros/DetalleLibro.js"],"names":["React","Component","axios","DatosLibro","Link","ListarCapitulos","Button","MostrarTrailersAsociados","perfiles","editoriales","generos","autores","Trailers","portada","me","terminado","capi","DetalleLibrosAdmin","constructor","props","getNombres","post","id","state","libro","autor","headers","xaccess","token","then","res","console","log","data","setState","catch","err","genero","editorial","getTrailer","trailer","response","msg","getTermine","alert","JSON","stringify","getDatos","capitulos","getCapitulos","HayCapitulos","filtrarCapitulos","validos","hoy","Date","getDate","mes","getMonth","año","getFullYear","hoyEntera","map","cap","lanzaHoy","lanzamiento","lanzaMes","lanzaAño","lanzaEntera","vencimiento","venciHoy","venciMes","venciAño","venciEntera","push","capitulosActivos","match","params","bottonCap","leerLibro","mostrarCapitulos","sessionStorage","getItem","libroId","fechaExpiracion","expiracion","termineLibro","_id","botonTermine","bind","componentDidMount","mostrarTermineLibro","render","show","termineL","capseleccionado","archivo"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport DatosLibro from \"./DatosLibro\";\r\nimport { Link } from \"react-router-dom\";\r\nimport ListarCapitulos from \"./ListarCapitulos\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport MostrarTrailersAsociados from \"../Trailers/MostrarTrailersAsociados\";\r\n\r\nconst perfiles = \"http://localhost:4000/api/perfiles/\";\r\nconst editoriales = \"http://localhost:4000/api/editoriales/\";\r\nconst generos = \"http://localhost:4000/api/generos/\";\r\nconst autores = \"http://localhost:4000/api/autores/\";\r\nconst Trailers = \"http://localhost:4000/api/trailers/\";\r\n\r\nconst portada = \"http://localhost:4000/uploads/\";\r\nconst me = \"http://localhost:4000/api/libros/me\";\r\nconst terminado = \"http://localhost:4000/api/libros/terminado\";\r\nconst capi = \"http://localhost:4000/api/libros/misCapitulos\";\r\n\r\nexport default class DetalleLibrosAdmin extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: this.props.match.params.id,\r\n      token: sessionStorage.getItem(\"token\"),\r\n      libro: \"\",\r\n      capitulos: \"\",\r\n      editorial: \"\",\r\n      genero: \"\",\r\n      autor: \"\",\r\n      bottonCap: false,\r\n      mostrarCapitulos: false,\r\n      trailer: null,\r\n      capi: [],\r\n      capitulosActivos: [],\r\n      botonTermine: false,\r\n    };\r\n    this.fechaExpiracion = this.fechaExpiracion.bind(this);\r\n    this.mostrarCapitulos = this.mostrarCapitulos.bind(this);\r\n  }\r\n\r\n  getNombres = async () => {\r\n    //traigo el autor actual\r\n    await axios\r\n      .post(\r\n        autores + \"me\",\r\n        { id: this.state.libro.autor },\r\n        { headers: { xaccess: this.state.token } }\r\n      )\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        this.setState({\r\n          autor: res.data,\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n\r\n    //traigo el genero actual\r\n    await axios\r\n      .post(\r\n        generos + \"me\",\r\n        { id: this.state.libro.genero },\r\n        { headers: { xaccess: this.state.token } }\r\n      )\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        this.setState({\r\n          genero: res.data,\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n\r\n    //traigo la editorial actual\r\n    await axios\r\n      .post(\r\n        editoriales + \"me\",\r\n        { id: this.state.libro.editorial },\r\n        { headers: { xaccess: this.state.token } }\r\n      )\r\n      .then((res) => {\r\n        this.setState({\r\n          editorial: res.data,\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  getTrailer = async () => {\r\n    if (this.state.libro.trailer != null) {\r\n      await axios\r\n        .post(\r\n          Trailers + \"me\",\r\n          { id: this.state.libro.trailer },\r\n          { headers: { xaccess: this.state.token } }\r\n        )\r\n        .then((res) => {\r\n          console.log(res.data);\r\n          console.log(res.data);\r\n          this.setState({\r\n            trailer: res.data,\r\n          });\r\n        })\r\n        .catch((err) => {\r\n          console.log(err.response.data.msg);\r\n        });\r\n    }\r\n  };\r\n  getTermine = async () => {\r\n    await axios\r\n      .post(\r\n        terminado,\r\n        {\r\n          id: this.state.id,\r\n        },\r\n        { headers: { xaccess: this.state.token } }\r\n      )\r\n      .then((res) => {\r\n        console.log(res.data);\r\n        //this.state.botonTermine = res.data;\r\n      })\r\n      .catch((err) => {\r\n        alert(JSON.stringify(err.response.data.msg));\r\n      });\r\n  };\r\n  getDatos = async () => {\r\n    await axios\r\n      .post(\r\n        me,\r\n        { id: this.state.id },\r\n        { headers: { xaccess: this.state.token } }\r\n      )\r\n      .then((res) => {\r\n        this.setState({\r\n          libro: res.data,\r\n          capitulos: res.data.capitulos,\r\n        });\r\n        this.getCapitulos();\r\n        this.getNombres();\r\n        this.HayCapitulos();\r\n        this.getTrailer();\r\n        this.getTermine();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  filtrarCapitulos = (capi) => {\r\n    console.log(\"CAPITULOS ANTES DE FILTRARLOS\", capi);\r\n    var validos = [];\r\n\r\n    const hoy = JSON.stringify(new Date().getDate());\r\n    const mes = JSON.stringify(new Date().getMonth() + 1);\r\n    const año = JSON.stringify(new Date().getFullYear());\r\n    const hoyEntera = JSON.stringify(new Date());\r\n\r\n    if (capi != []) {\r\n      capi.map((cap) => {\r\n        const lanzaHoy = JSON.stringify(new Date(cap.lanzamiento).getDate());\r\n        const lanzaMes = JSON.stringify(\r\n          new Date(cap.lanzamiento).getMonth() + 1\r\n        );\r\n        const lanzaAño = JSON.stringify(\r\n          new Date(cap.lanzamiento).getFullYear()\r\n        );\r\n        const lanzaEntera = JSON.stringify(new Date(capi.lanzamiento));\r\n        if (\r\n          (hoy == lanzaHoy) & (mes == lanzaMes) & (año == lanzaAño) ||\r\n          lanzaEntera > hoyEntera\r\n        ) {\r\n          if (cap.vencimiento) {\r\n            const venciHoy = JSON.stringify(\r\n              new Date(cap.lanzamiento).getDate()\r\n            );\r\n            const venciMes = JSON.stringify(\r\n              new Date(cap.lanzamiento).getMonth() + 1\r\n            );\r\n            const venciAño = JSON.stringify(\r\n              new Date(cap.lanzamiento).getFullYear()\r\n            );\r\n            const venciEntera = JSON.stringify(new Date(cap.vencimiento));\r\n\r\n            if (\r\n              (venciHoy == hoy) & (venciMes == mes) & (venciAño == año) ||\r\n              venciEntera > hoyEntera\r\n            ) {\r\n              validos.push(cap);\r\n            }\r\n          } else {\r\n            validos.push(cap);\r\n          }\r\n        }\r\n      });\r\n      this.setState({\r\n        capitulosActivos: validos,\r\n      });\r\n    }\r\n    console.log(\"CAPITULOS DESPUES DE FILTRARLOS\", this.state.capitulosActivos);\r\n  };\r\n\r\n  getCapitulos = async () => {\r\n    await axios\r\n      .post(\r\n        capi,\r\n        { id: this.props.match.params.id },\r\n        { headers: { xaccess: this.state.token } }\r\n      )\r\n      .then((res) => {\r\n        this.setState({\r\n          capi: res.data,\r\n        });\r\n\r\n        this.filtrarCapitulos(res.data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        alert(JSON.stringify(err.response.data.msg));\r\n      });\r\n  };\r\n\r\n  HayCapitulos = () => {\r\n    if (this.state.capitulos != \"\") {\r\n      this.state.bottonCap = true;\r\n    }\r\n  };\r\n\r\n  leerLibro = async () => {\r\n    console.log(this.state.bottonCap);\r\n    console.log(this.state.mostrarCapitulos);\r\n    if (this.state.bottonCap) {\r\n      console.log(\"entro en el true de botton\");\r\n    }\r\n    if (this.state.bottonCap) {\r\n      await axios\r\n        .post(\r\n          perfiles + \"visitadoLibro\",\r\n          { id: sessionStorage.getItem(\"perfilID\"), libroId: this.state.id },\r\n          { headers: { xaccess: this.state.token } }\r\n        )\r\n        .then((res) => {\r\n          console.log(res.data);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n          alert(JSON.stringify(err.response.data.msg));\r\n        });\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.getDatos();\r\n    this.HayCapitulos();\r\n  }\r\n\r\n  fechaExpiracion = () => {\r\n    if (!this.props.libro.fechaExpiracion) {\r\n      return (\r\n        <h6 className=\"card-subtitle mb-2 text-muted\">\r\n          Fecha de expiración: {this.state.libro.expiracion}\r\n        </h6>\r\n      );\r\n    } else {\r\n      return <div />;\r\n    }\r\n  };\r\n\r\n  mostrarCapitulos() {\r\n    this.setState({\r\n      mostrarCapitulos: !this.state.mostrarCapitulos,\r\n    });\r\n    console.log(this.state.mostrarCapitulos);\r\n  }\r\n\r\n  mostrarTermineLibro() {\r\n    if (this.state.botonTermine) {\r\n    }\r\n  }\r\n\r\n  termineLibro = async () => {\r\n    await axios\r\n      .post(\r\n        perfiles + \"termineLibro\",\r\n        {\r\n          id: sessionStorage.getItem(\"perfilID\"),\r\n          libroId: this.state.libro._id,\r\n        },\r\n        { headers: { xaccess: this.state.token } }\r\n      )\r\n      .then((res) => {\r\n        alert(res.data.msg);\r\n      })\r\n      .catch((err) => {\r\n        alert(err.response.data.msg);\r\n      });\r\n  };\r\n\r\n  render() {\r\n    const show = this.state.bottonCap;\r\n    const termineL = this.state.botonTermine;\r\n    const capseleccionado = this.state.capseleccionado - 1;\r\n\r\n    return (\r\n      <div>\r\n        <DatosLibro\r\n          libro={this.state.libro}\r\n          autor={this.state.autor}\r\n          genero={this.state.genero}\r\n          editorial={this.state.editorial}\r\n        ></DatosLibro>\r\n\r\n        {termineL ? (\r\n          <React.Fragment>\r\n            <div>\r\n              <button\r\n                className=\"btn btn-outline-success col-md-2 offset-md-3 danger\"\r\n                onClick={this.termineLibro}\r\n              >\r\n                Termine libro\r\n              </button>\r\n            </div>\r\n            <br></br>\r\n          </React.Fragment>\r\n        ) : (\r\n          <React.Fragment></React.Fragment>\r\n        )}\r\n\r\n        {show ? (\r\n          <React.Fragment>\r\n            <div class=\"card col-md-6 offset-md-3\">\r\n              <button\r\n                className=\"btn btn-outline-success\"\r\n                onClick={this.mostrarCapitulos}\r\n              >\r\n                {\" \"}\r\n                Ver Capitulos\r\n              </button>\r\n            </div>\r\n            {this.state.mostrarCapitulos ? (\r\n              <ListarCapitulos\r\n                capitulos={this.state.capitulosActivos}\r\n                libroId={this.state.libro._id}\r\n              ></ListarCapitulos>\r\n            ) : (\r\n              <React.Fragment> </React.Fragment>\r\n            )}\r\n          </React.Fragment>\r\n        ) : (\r\n          <React.Fragment>\r\n            <div>\r\n              <div class=\"card col-md-6 offset-md-3 text-light bg-dark\">\r\n                <div class=\"card-body \">\r\n                  <Link\r\n                    onClick={this.leerLibro}\r\n                    className=\"btn btn-outline-success itemBoton\"\r\n                    to={\"/suscriptor/libros/leer/\" + this.state.libro.archivo}\r\n                  >\r\n                    {\" \"}\r\n                    Leer Libro{\" \"}\r\n                  </Link>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </React.Fragment>\r\n        )}\r\n        <React.Fragment>\r\n          <MostrarTrailersAsociados\r\n            trailer={this.state.trailer}\r\n          ></MostrarTrailersAsociados>\r\n        </React.Fragment>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}