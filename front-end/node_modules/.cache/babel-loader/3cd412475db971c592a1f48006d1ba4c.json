{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jhon\\\\Desktop\\\\proyectos-IS1\\\\version4.0\\\\bf\\\\front-end\\\\src\\\\components\\\\VistaAdmin\\\\Reportes\\\\ReporteDeUsuarios.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport '../../../../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport DatePicker from '../../../../node_modules/react-datepicker';\nimport '../../../../node_modules/react-datepicker/dist/react-datepicker.css';\nimport ItemListUsuario from './ItemListUsuario';\nimport \"slick-carousel/slick/slick.css\";\nimport \"slick-carousel/slick/slick-theme.css\";\nimport Slider from \"react-slick\";\nconst getSuscriptores = 'http://localhost:4000/api/suscriptores';\n\nclass ReporteDeUsuarios extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChangeFecha = desde => {\n      this.setState({\n        desde\n      });\n    };\n\n    this.onChangeFechaHasta = hasta => {\n      this.setState({\n        hasta\n      });\n    };\n\n    this.validar = () => {\n      var hoy = new Date();\n      hoy.setHours(0);\n      hoy.setMinutes(0);\n      hoy.setSeconds(0);\n      console.log(hoy);\n      console.log(this.state.lanzamiento);\n\n      if (this.state.lanzamiento < hoy) {\n        alert('La fecha de lanzaminto es menor a la actual');\n        return false;\n      }\n\n      if (this.state.vencimiento != null) {\n        if (this.state.vencimiento < this.state.lanzamiento) {\n          alert('La fecha de vencimiento debe ser mayor a la de lanzamiento');\n          return false;\n        }\n      }\n\n      if (this.state.pdf == null) {\n        alert('El archivo pdf es obligatorio');\n        return false;\n      }\n\n      return true;\n    };\n\n    this.filtrarUsuarios = usuarios => {\n      var filtrados = [];\n      usuarios.map(usu => {\n        if (usu.createdAt != null) {\n          let crea = new Date(usu.createdAt);\n          let desde = this.state.desde;\n          let hasta = this.state.hasta;\n          crea.setHours(0);\n          crea.setMinutes(0);\n          crea.setSeconds(0);\n          desde.setHours(0);\n          desde.setMinutes(0);\n          desde.setSeconds(0);\n          hasta.setHours(0);\n          desde.setMinutes(0);\n          desde.setSeconds(0);\n          console.log(crea);\n          console.log(desde);\n          console.log(hasta);\n\n          if (crea >= desde && crea <= hasta) {\n            filtrados.push(usu);\n          }\n        }\n      });\n      return filtrados;\n    };\n\n    this.onSubmit = e => {\n      e.preventDefault();\n      console.log(this.state.desde);\n      console.log(this.state.hasta);\n      this.setUsuariosCarrusel(this.filtrarUsuarios(this.state.suscriptores));\n    };\n\n    this.limpiar = e => {\n      this.setState({\n        desde: '',\n        hasta: '',\n        usuariosCarrusel: []\n      });\n      console.log(this.state.usuariosCarrusel);\n      this.render();\n    };\n\n    this.state = {\n      desde: '',\n      hasta: '',\n      token: sessionStorage.getItem('token'),\n      suscriptores: [],\n      usuariosCarrusel: []\n    };\n  }\n\n  async componentDidMount() {\n    await axios.get(getSuscriptores, {\n      headers: {\n        'xaccess': this.state.token\n      }\n    }).then(res => {\n      this.setState({\n        suscriptores: res.data\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  setUsuariosCarrusel(res) {\n    var num = 2;\n    var aux = [];\n    var aux2 = [];\n    res.map(no => {\n      if (aux.length < num) {\n        aux.push(no);\n      } else {\n        aux.push(no);\n        aux2.push(aux);\n        aux = [];\n      }\n\n      ;\n    });\n\n    if (aux != []) {\n      aux2.push(aux);\n    }\n\n    this.setState({\n      usuariosCarrusel: aux2\n    });\n  }\n\n  render() {\n    const settings = {\n      dots: true,\n      infinite: false,\n      speed: 500,\n      slidesToShow: 1,\n      slidesToScroll: 1,\n      className: 'slides'\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"col-md-8 offset-md-4  text-light \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 17\n      }\n    }, \" \", 'Buscar Usuarios', \" \"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"offset-md-3  text-light \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onSubmit,\n      autoComplete: \"off\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"text\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 13\n      }\n    }, ' Desde '), /*#__PURE__*/React.createElement(DatePicker, {\n      className: \"form-control\",\n      selected: this.state.desde,\n      name: \"desde\",\n      onChange: this.onChangeFecha,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"text\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 13\n      }\n    }, ' Hasta '), /*#__PURE__*/React.createElement(DatePicker, {\n      className: \"form-control\",\n      selected: this.state.hasta,\n      name: \"hasta\",\n      onChange: this.onChangeFechaHasta,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-light itemBoton  \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      class: \"bi bi-search\",\n      width: \"1em\",\n      height: \"1em\",\n      viewBox: \"0 0 16 16\",\n      fill: \"currentColor\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      d: \"M10.442 10.442a1 1 0 0 1 1.415 0l3.85 3.85a1 1 0 0 1-1.414 1.415l-3.85-3.85a1 1 0 0 1 0-1.415z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      d: \"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 25\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"carrusel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Slider, Object.assign({}, settings, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 25\n      }\n    }), this.state.usuariosCarrusel.map(usuarios => /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 29\n      }\n    }, usuarios.map(usuario => /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(ItemListUsuario, {\n      usuario: usuario,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 37\n      }\n    }))))))));\n  }\n\n}\n\nexport default ReporteDeUsuarios;","map":{"version":3,"sources":["C:/Users/Jhon/Desktop/proyectos-IS1/version4.0/bf/front-end/src/components/VistaAdmin/Reportes/ReporteDeUsuarios.js"],"names":["React","Component","axios","DatePicker","ItemListUsuario","Slider","getSuscriptores","ReporteDeUsuarios","constructor","props","onChangeFecha","desde","setState","onChangeFechaHasta","hasta","validar","hoy","Date","setHours","setMinutes","setSeconds","console","log","state","lanzamiento","alert","vencimiento","pdf","filtrarUsuarios","usuarios","filtrados","map","usu","createdAt","crea","push","onSubmit","e","preventDefault","setUsuariosCarrusel","suscriptores","limpiar","usuariosCarrusel","render","token","sessionStorage","getItem","componentDidMount","get","headers","then","res","data","catch","err","num","aux","aux2","no","length","settings","dots","infinite","speed","slidesToShow","slidesToScroll","className","usuario"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport '../../../../node_modules/bootstrap/dist/css/bootstrap.min.css';\r\nimport DatePicker from '../../../../node_modules/react-datepicker';\r\nimport '../../../../node_modules/react-datepicker/dist/react-datepicker.css';\r\nimport ItemListUsuario from './ItemListUsuario';\r\nimport \"slick-carousel/slick/slick.css\"; \r\nimport \"slick-carousel/slick/slick-theme.css\";\r\nimport Slider from \"react-slick\";\r\n\r\n\r\nconst getSuscriptores = 'http://localhost:4000/api/suscriptores';\r\n\r\nclass ReporteDeUsuarios extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n            desde:'',\r\n            hasta:'',\r\n            token: sessionStorage.getItem('token'),\r\n            suscriptores: [],\r\n            usuariosCarrusel:[],\r\n        }\r\n\r\n    }\r\n\r\n\r\n    \r\n    async componentDidMount(){\r\n\r\n        await axios.get(getSuscriptores, {\r\n            headers: { 'xaccess': this.state.token }\r\n        })\r\n        .then(res => {\r\n            this.setState({\r\n                suscriptores: res.data\r\n            });\r\n        })\r\n        .catch(err => {\r\n            console.log(err)\r\n        });\r\n\r\n    }\r\n\r\n    setUsuariosCarrusel(res){\r\n        \r\n       \r\n        var num =2;\r\n        var aux=[]; \r\n        var aux2=[];\r\n\r\n        res.map(no=>{\r\n            if(aux.length< num){\r\n                aux.push(no);\r\n            }else{\r\n                aux.push(no);\r\n                aux2.push(aux);\r\n                aux=[] \r\n            };\r\n        })\r\n        if(aux!=[]){\r\n            aux2.push(aux);\r\n        }\r\n\r\n        this.setState({\r\n            \r\n            usuariosCarrusel:aux2\r\n        });\r\n\r\n\r\n\r\n    }\r\n\r\n    onChangeFecha = desde => {\r\n        this.setState({ desde });\r\n    };\r\n    onChangeFechaHasta = hasta => {\r\n        this.setState({ hasta });\r\n    };\r\n\r\n    validar=()=>{\r\n        var hoy=new Date();\r\n        hoy.setHours(0);\r\n        hoy.setMinutes(0);\r\n        hoy.setSeconds(0);\r\n    \r\n       console.log(hoy);\r\n       console.log(this.state.lanzamiento);\r\n        if(this.state.lanzamiento < hoy){\r\n          alert('La fecha de lanzaminto es menor a la actual');\r\n          return false;\r\n        } \r\n    \r\n    \r\n        if(this.state.vencimiento != null){\r\n          if(this.state.vencimiento < this.state.lanzamiento){\r\n            alert('La fecha de vencimiento debe ser mayor a la de lanzamiento');\r\n            return false;\r\n          }\r\n    \r\n        }\r\n        if(this.state.pdf == null){\r\n           alert('El archivo pdf es obligatorio');\r\n           return false;\r\n        }\r\n        return true;\r\n    \r\n      }\r\n\r\n\r\n\r\n    filtrarUsuarios=(usuarios)=>{\r\n      \r\n\r\n        var filtrados=[];\r\n        usuarios.map(usu =>{ \r\n            if(usu.createdAt != null){\r\n                let crea=new Date(usu.createdAt);\r\n                let desde=this.state.desde;\r\n                let hasta= this.state.hasta;\r\n\r\n                crea.setHours(0);\r\n                crea.setMinutes(0);\r\n                crea.setSeconds(0);\r\n\r\n                desde.setHours(0);\r\n                desde.setMinutes(0);\r\n                desde.setSeconds(0);\r\n\r\n                hasta.setHours(0);\r\n                desde.setMinutes(0);\r\n                desde.setSeconds(0);\r\n\r\n                console.log(crea);\r\n                console.log(desde);\r\n                console.log(hasta);\r\n\r\n                if(crea>= desde && crea <= hasta){\r\n                    filtrados.push(usu);\r\n                }\r\n            }\r\n            \r\n        })\r\n        return filtrados;\r\n\r\n    }\r\n\r\n    onSubmit=(e)=>{\r\n        e.preventDefault();\r\n        console.log(this.state.desde);\r\n        console.log(this.state.hasta);\r\n        this.setUsuariosCarrusel(this.filtrarUsuarios(this.state.suscriptores));\r\n    }\r\n\r\n    limpiar=(e)=>{\r\n \r\n        this.setState({\r\n            desde:'',\r\n            hasta:'',\r\n            usuariosCarrusel:[],\r\n\r\n        });console.log(this.state.usuariosCarrusel) ;\r\n        this.render();   \r\n    }\r\n\r\n\r\n    render() {\r\n        const settings = {\r\n            dots: true,\r\n            infinite: false,\r\n            speed: 500,\r\n            slidesToShow: 1,\r\n            slidesToScroll: 1,\r\n            className: 'slides',\r\n            \r\n          };\r\n        return (\r\n            \r\n            <div>\r\n\r\n                <h1 className=\"col-md-8 offset-md-4  text-light \"> {'Buscar Usuarios' } </h1>\r\n                <br></br>\r\n\r\n                <div className=\"offset-md-3  text-light \">\r\n                <form  onSubmit={this.onSubmit} autoComplete='off'>\r\n                    \r\n                    \r\n         \r\n                 \r\n            <text >{' Desde '}</text>\r\n            <DatePicker className=\"form-control\"\r\n                    selected={this.state.desde}\r\n                    name='desde'\r\n                    onChange={this.onChangeFecha}\r\n                     \r\n            />\r\n            <text>{' Hasta '}</text>\r\n            <DatePicker className=\"form-control\"\r\n                    selected={this.state.hasta}\r\n                    name='hasta'\r\n                    onChange={this.onChangeFechaHasta}\r\n                     \r\n            />\r\n          \r\n\r\n                    \r\n\r\n\r\n                    <button type =\"submit\" className=\"btn btn-light itemBoton  \"> \r\n                        <svg class=\"bi bi-search\" width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <path fill-rule=\"evenodd\" d=\"M10.442 10.442a1 1 0 0 1 1.415 0l3.85 3.85a1 1 0 0 1-1.414 1.415l-3.85-3.85a1 1 0 0 1 0-1.415z\"/>\r\n                        <path fill-rule=\"evenodd\" d=\"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z\"/>\r\n                        </svg>\r\n                    </button>    \r\n                     \r\n\r\n                </form>\r\n\r\n                </div>\r\n\r\n                <div className=\"carrusel\">\r\n                        <Slider {...settings} >\r\n        \r\n                            {this.state.usuariosCarrusel.map(usuarios => \r\n                            <div>\r\n                               {usuarios.map( usuario=>\r\n                                <div>\r\n                                    <ItemListUsuario usuario={usuario}></ItemListUsuario>      \r\n                                </div>  \r\n                                )}\r\n                            </div>\r\n                            )}                          \r\n                        </Slider>\r\n                        </div>\r\n                \r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default ReporteDeUsuarios;\r\n"]},"metadata":{},"sourceType":"module"}