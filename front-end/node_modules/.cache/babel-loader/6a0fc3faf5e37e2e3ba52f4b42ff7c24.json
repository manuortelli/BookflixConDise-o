{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jhon\\\\Desktop\\\\proyectos-IS1\\\\version4.0\\\\bf\\\\front-end\\\\src\\\\components\\\\VistaSuscriptor\\\\Libros\\\\Buscador.js\";\nimport React, { Component } from \"react\";\nimport axios from \"../../../../node_modules/axios\";\nimport Slider from \"react-slick\";\nimport { Link } from \"react-router-dom\";\nimport \"slick-carousel/slick/slick.css\";\nimport \"slick-carousel/slick/slick-theme.css\";\nconst portada = \"http://localhost:4000/uploads/\";\nconst autores = \"http://localhost:4000/api/autores/\";\nconst generos = \"http://localhost:4000/api/generos/\";\nconst editoriales = \"http://localhost:4000/api/editoriales/\";\nconst libros = \"http://localhost:4000/api/libros/\";\nexport default class Buscador extends Component {\n  constructor(props) {\n    super(props);\n\n    this.filtrarFechas = libros => {\n      var res = [];\n      const hoyEntera = new Date();\n      libros.map(lib => {\n        if (lib.lanzamiento != null) {\n          const hoy = JSON.stringify(new Date().getDate());\n          const mes = JSON.stringify(new Date().getMonth() + 1);\n          const año = JSON.stringify(new Date().getFullYear());\n          const lanMes = JSON.stringify(new Date(lib.lanzamiento).getMonth() + 1);\n          const lanHoy = JSON.stringify(new Date(lib.lanzamiento).getDate());\n          const lanAño = JSON.stringify(new Date(lib.lanzamiento).getFullYear());\n          const lanzaEntera = new Date(lib.lanzamiento);\n\n          if (lanHoy == hoy & lanMes == mes & lanAño == año || lanzaEntera < hoyEntera) {\n            if (lib.expiracion != null) {\n              var ven = new Date(lib.expiracion);\n              const venciMes = JSON.stringify(new Date(lib.expiracion).getMonth() + 1);\n              const venciHoy = JSON.stringify(new Date(lib.expiracion).getDate());\n              const venciAño = JSON.stringify(new Date(lib.expiracion).getFullYear());\n              const venciEntera = new Date(lib.expiracion);\n\n              if (venciHoy == hoy & venciMes == mes & venciAño == año || venciEntera > hoyEntera) {\n                res.push(lib);\n              }\n            } else {\n              res.push(lib);\n            }\n          }\n        }\n      });\n      return res;\n    };\n\n    this.getData = async () => {\n      await axios.get(libros, {\n        headers: {\n          xaccess: this.state.token\n        }\n      }).then(res => {\n        this.setLibros(res.data);\n      }).catch();\n      await axios.get(autores, {\n        headers: {\n          xaccess: this.state.token\n        }\n      }).then(res => {\n        this.setAutores(res.data);\n      }).catch(err => {\n        console.log(err);\n      });\n      await axios.get(generos, {\n        headers: {\n          xaccess: this.state.token\n        }\n      }).then(res => {\n        this.setGeneros(res.data);\n      }).catch(err => {\n        console.log(err);\n      });\n      await axios.get(editoriales, {\n        headers: {\n          xaccess: this.state.token\n        }\n      }).then(res => {\n        this.setEditoriales(res.data);\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.onInputChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.loPuedoAgregar = libro => {\n      var puedo = true;\n\n      if (this.state.buscador != \"\") {\n        var resultado = libro.titulo.toLowerCase().indexOf(this.state.buscador.toLowerCase());\n\n        if (resultado != -1) {\n          puedo = true;\n        } else {\n          return false;\n        }\n      }\n\n      if (this.state.autor != \"\") {\n        if (this.state.autor == libro.autor) {\n          puedo = true;\n        } else {\n          return false;\n        }\n      }\n\n      if (this.state.genero != \"\") {\n        if (this.state.genero == libro.genero) {\n          puedo = true;\n        } else {\n          return false;\n        }\n      }\n\n      if (this.state.editorial != \"\") {\n        if (this.state.editorial == libro.editorial) {\n          puedo = true;\n        } else {\n          return false;\n        }\n      }\n\n      return puedo;\n    };\n\n    this.onSubmit = e => {\n      e.preventDefault();\n      var lib = [];\n      this.state.libros.map(libro => {\n        if (this.loPuedoAgregar(libro)) {\n          lib.push(libro);\n        }\n      });\n      this.setState({\n        librosConFiltro: lib\n      });\n\n      if (lib.length === 0) {\n        alert(\"No existen libros que coincidan con los filtros puestos\");\n      }\n\n      this.setLibrosConFiltro(lib);\n    };\n\n    this.limpiar = e => {\n      var copia = this.state.autores;\n      this.setState({\n        librosConFiltro: this.state.libros,\n        autor: \"\",\n        buscador: \"\",\n        editorial: \"\",\n        genero: \"\",\n        borrar: true\n      });\n      this.render();\n    };\n\n    this.state = {\n      token: sessionStorage.getItem(\"token\"),\n      buscador: \"\",\n      autor: \"\",\n      genero: \"\",\n      editorial: \"\",\n      libros: [],\n      autores: [],\n      generos: [],\n      editoriales: [],\n      librosConFiltro: [],\n      LibrosCarrousel: [],\n      borrar: false\n    };\n    this.loPuedoAgregar = this.loPuedoAgregar.bind(this);\n  }\n\n  setAutores(res) {\n    this.setState({\n      autores: res\n    });\n  }\n\n  setGeneros(res) {\n    this.setState({\n      generos: res\n    });\n  }\n\n  setEditoriales(res) {\n    this.setState({\n      editoriales: res\n    });\n  }\n\n  setLibros(res) {\n    console.log(\"lista de libros\");\n    var re = this.filtrarFechas(res);\n    console.log(re);\n    this.setState({\n      libros: re,\n      librosConFiltro: re\n    });\n    this.setLibrosConFiltro(re);\n  }\n\n  setLibrosConFiltro(res) {\n    var num = 2;\n    var aux = [];\n    var aux2 = [];\n    res.map(libro => {\n      if (aux.length < num) {\n        aux.push(libro);\n      } else {\n        aux.push(libro);\n        aux2.unshift(aux);\n        aux = [];\n      }\n    });\n\n    if (aux != []) {\n      aux2.unshift(aux);\n    }\n\n    this.setState({\n      LibrosCarrousel: aux2\n    });\n  }\n\n  async componentDidMount() {\n    this.getData();\n  }\n\n  render() {\n    const settings = {\n      dots: true,\n      infinite: false,\n      speed: 500,\n      slidesToShow: 5,\n      slidesToScroll: 1,\n      className: \"slides\"\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-8 offset-md-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"itemBuscador\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"exampleFormControlInput1\",\n      name: \"buscador\",\n      onChange: this.onInputChange,\n      value: this.state.buscador,\n      placeholder: \"Buscar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"itemBuscador\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      className: \"form-control\",\n      onChange: this.onInputChange,\n      id: \"exampleFormControlSelect1\",\n      name: \"autor\",\n      value: this.state.autor,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      selected: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 17\n      }\n    }, \"Autor/a\"), this.state.autores.map(autor => /*#__PURE__*/React.createElement(\"option\", {\n      key: autor._id,\n      value: autor._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 19\n      }\n    }, autor.nombre, \" \", autor.apellido)))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"itemBuscador\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      className: \"form-control\",\n      value: this.state.genero,\n      onChange: this.onInputChange,\n      id: \"exampleFormControlSelect1\",\n      name: \"genero\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 17\n      }\n    }, \"G\\xE9nero\"), this.state.generos.map(ge => /*#__PURE__*/React.createElement(\"option\", {\n      key: ge._id,\n      value: ge._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 19\n      }\n    }, ge.nombre)))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"itemBuscador\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      className: \"form-control\",\n      onChange: this.onInputChange,\n      id: \"exampleFormControlSelect1\",\n      name: \"editorial\",\n      value: this.state.editorial,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 17\n      }\n    }, \"Editorial\"), this.state.editoriales.map(ed => /*#__PURE__*/React.createElement(\"option\", {\n      key: ed.id,\n      value: ed._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 19\n      }\n    }, ed.nombre)))), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-light itemBoton  \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      class: \"bi bi-search\",\n      width: \"1em\",\n      height: \"1em\",\n      viewBox: \"0 0 16 16\",\n      fill: \"currentColor\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      d: \"M10.442 10.442a1 1 0 0 1 1.415 0l3.85 3.85a1 1 0 0 1-1.414 1.415l-3.85-3.85a1 1 0 0 1 0-1.415z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      d: \"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.limpiar,\n      className: \"btn btn-light itemBoton \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      class: \"bi bi-backspace\",\n      width: \"1em\",\n      height: \"1em\",\n      viewBox: \"0 0 16 16\",\n      fill: \"currentColor\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      d: \"M6.603 2h7.08a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-7.08a1 1 0 0 1-.76-.35L1 8l4.844-5.65A1 1 0 0 1 6.603 2zm7.08-1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7.08a2 2 0 0 1-1.519-.698L.241 8.65a1 1 0 0 1 0-1.302L5.084 1.7A2 2 0 0 1 6.603 1h7.08z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      d: \"M5.83 5.146a.5.5 0 0 0 0 .708l5 5a.5.5 0 0 0 .707-.708l-5-5a.5.5 0 0 0-.708 0z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"path\", {\n      \"fill-rule\": \"evenodd\",\n      d: \"M11.537 5.146a.5.5 0 0 1 0 .708l-5 5a.5.5 0 0 1-.708-.708l5-5a.5.5 0 0 1 .707 0z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 17\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"carrusel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Slider, Object.assign({}, settings, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 11\n      }\n    }), this.state.librosConFiltro.map(libro => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-VerLibro\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      className: \"imgBx\",\n      to: \"/suscriptor/libros/\" + libro._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: portada + libro.portada,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"titulo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 23\n      }\n    }, \" \", libro.titulo, \" \")))))))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Jhon/Desktop/proyectos-IS1/version4.0/bf/front-end/src/components/VistaSuscriptor/Libros/Buscador.js"],"names":["React","Component","axios","Slider","Link","portada","autores","generos","editoriales","libros","Buscador","constructor","props","filtrarFechas","res","hoyEntera","Date","map","lib","lanzamiento","hoy","JSON","stringify","getDate","mes","getMonth","año","getFullYear","lanMes","lanHoy","lanAño","lanzaEntera","expiracion","ven","venciMes","venciHoy","venciAño","venciEntera","push","getData","get","headers","xaccess","state","token","then","setLibros","data","catch","setAutores","err","console","log","setGeneros","setEditoriales","onInputChange","e","setState","target","name","value","loPuedoAgregar","libro","puedo","buscador","resultado","titulo","toLowerCase","indexOf","autor","genero","editorial","onSubmit","preventDefault","librosConFiltro","length","alert","setLibrosConFiltro","limpiar","copia","borrar","render","sessionStorage","getItem","LibrosCarrousel","bind","re","num","aux","aux2","unshift","componentDidMount","settings","dots","infinite","speed","slidesToShow","slidesToScroll","className","_id","nombre","apellido","ge","ed","id"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"../../../../node_modules/axios\";\r\nimport Slider from \"react-slick\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport \"slick-carousel/slick/slick.css\";\r\nimport \"slick-carousel/slick/slick-theme.css\";\r\n\r\nconst portada = \"http://localhost:4000/uploads/\";\r\nconst autores = \"http://localhost:4000/api/autores/\";\r\nconst generos = \"http://localhost:4000/api/generos/\";\r\nconst editoriales = \"http://localhost:4000/api/editoriales/\";\r\nconst libros = \"http://localhost:4000/api/libros/\";\r\n\r\nexport default class Buscador extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      token: sessionStorage.getItem(\"token\"),\r\n\r\n      buscador: \"\",\r\n      autor: \"\",\r\n      genero: \"\",\r\n      editorial: \"\",\r\n\r\n      libros: [],\r\n      autores: [],\r\n      generos: [],\r\n      editoriales: [],\r\n\r\n      librosConFiltro: [],\r\n      LibrosCarrousel: [],\r\n      borrar: false,\r\n    };\r\n    this.loPuedoAgregar = this.loPuedoAgregar.bind(this);\r\n  }\r\n  setAutores(res) {\r\n    this.setState({\r\n      autores: res,\r\n    });\r\n  }\r\n  setGeneros(res) {\r\n    this.setState({\r\n      generos: res,\r\n    });\r\n  }\r\n\r\n  setEditoriales(res) {\r\n    this.setState({\r\n      editoriales: res,\r\n    });\r\n  }\r\n\r\n  filtrarFechas = (libros) => {\r\n    var res = [];\r\n    const hoyEntera = new Date();\r\n    libros.map((lib) => {\r\n      if (lib.lanzamiento != null) {\r\n        const hoy = JSON.stringify(new Date().getDate());\r\n        const mes = JSON.stringify(new Date().getMonth() + 1);\r\n        const año = JSON.stringify(new Date().getFullYear());\r\n\r\n        const lanMes = JSON.stringify(new Date(lib.lanzamiento).getMonth() + 1);\r\n\r\n        const lanHoy = JSON.stringify(new Date(lib.lanzamiento).getDate());\r\n\r\n        const lanAño = JSON.stringify(new Date(lib.lanzamiento).getFullYear());\r\n        const lanzaEntera = new Date(lib.lanzamiento);\r\n        if (\r\n          (lanHoy == hoy) & (lanMes == mes) & (lanAño == año) ||\r\n          lanzaEntera < hoyEntera\r\n        ) {\r\n          if (lib.expiracion != null) {\r\n            var ven = new Date(lib.expiracion);\r\n            const venciMes = JSON.stringify(\r\n              new Date(lib.expiracion).getMonth() + 1\r\n            );\r\n\r\n            const venciHoy = JSON.stringify(new Date(lib.expiracion).getDate());\r\n\r\n            const venciAño = JSON.stringify(\r\n              new Date(lib.expiracion).getFullYear()\r\n            );\r\n            const venciEntera = new Date(lib.expiracion);\r\n\r\n            if (\r\n              (venciHoy == hoy) & (venciMes == mes) & (venciAño == año) ||\r\n              venciEntera > hoyEntera\r\n            ) {\r\n              res.push(lib);\r\n            }\r\n          } else {\r\n            res.push(lib);\r\n          }\r\n        }\r\n      }\r\n    });\r\n    return res;\r\n  };\r\n\r\n  setLibros(res) {\r\n    console.log(\"lista de libros\");\r\n    var re = this.filtrarFechas(res);\r\n\r\n    console.log(re);\r\n    this.setState({\r\n      libros: re,\r\n      librosConFiltro: re,\r\n    });\r\n    this.setLibrosConFiltro(re);\r\n  }\r\n  setLibrosConFiltro(res) {\r\n    var num = 2;\r\n    var aux = [];\r\n    var aux2 = [];\r\n\r\n    res.map((libro) => {\r\n      if (aux.length < num) {\r\n        aux.push(libro);\r\n      } else {\r\n        aux.push(libro);\r\n        aux2.unshift(aux);\r\n        aux = [];\r\n      }\r\n    });\r\n    if (aux != []) {\r\n      aux2.unshift(aux);\r\n    }\r\n    this.setState({\r\n      LibrosCarrousel: aux2,\r\n    });\r\n  }\r\n\r\n  getData = async () => {\r\n    await axios\r\n      .get(libros, {\r\n        headers: { xaccess: this.state.token },\r\n      })\r\n      .then((res) => {\r\n        this.setLibros(res.data);\r\n      })\r\n      .catch();\r\n\r\n    await axios\r\n      .get(autores, {\r\n        headers: { xaccess: this.state.token },\r\n      })\r\n      .then((res) => {\r\n        this.setAutores(res.data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n\r\n    await axios\r\n      .get(generos, {\r\n        headers: { xaccess: this.state.token },\r\n      })\r\n      .then((res) => {\r\n        this.setGeneros(res.data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n\r\n    await axios\r\n      .get(editoriales, {\r\n        headers: { xaccess: this.state.token },\r\n      })\r\n      .then((res) => {\r\n        this.setEditoriales(res.data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  async componentDidMount() {\r\n    this.getData();\r\n  }\r\n\r\n  onInputChange = (e) => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  loPuedoAgregar = (libro) => {\r\n    var puedo = true;\r\n\r\n    if (this.state.buscador != \"\") {\r\n      var resultado = libro.titulo\r\n        .toLowerCase()\r\n        .indexOf(this.state.buscador.toLowerCase());\r\n\r\n      if (resultado != -1) {\r\n        puedo = true;\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    if (this.state.autor != \"\") {\r\n      if (this.state.autor == libro.autor) {\r\n        puedo = true;\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    if (this.state.genero != \"\") {\r\n      if (this.state.genero == libro.genero) {\r\n        puedo = true;\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n    if (this.state.editorial != \"\") {\r\n      if (this.state.editorial == libro.editorial) {\r\n        puedo = true;\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n    return puedo;\r\n  };\r\n\r\n  onSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    var lib = [];\r\n\r\n    this.state.libros.map((libro) => {\r\n      if (this.loPuedoAgregar(libro)) {\r\n        lib.push(libro);\r\n      }\r\n    });\r\n\r\n    this.setState({\r\n      librosConFiltro: lib,\r\n    });\r\n    if (lib.length === 0) {\r\n      alert(\"No existen libros que coincidan con los filtros puestos\");\r\n    }\r\n\r\n    this.setLibrosConFiltro(lib);\r\n  };\r\n\r\n  limpiar = (e) => {\r\n    var copia = this.state.autores;\r\n\r\n    this.setState({\r\n      librosConFiltro: this.state.libros,\r\n      autor: \"\",\r\n      buscador: \"\",\r\n      editorial: \"\",\r\n      genero: \"\",\r\n\r\n      borrar: true,\r\n    });\r\n\r\n    this.render();\r\n  };\r\n\r\n  render() {\r\n    const settings = {\r\n      dots: true,\r\n      infinite: false,\r\n      speed: 500,\r\n      slidesToShow: 5,\r\n      slidesToScroll: 1,\r\n      className: \"slides\",\r\n\r\n      \r\n    };\r\n\r\n    return (\r\n      <div>\r\n        <div className=\"col-md-8 offset-md-2\">\r\n          <form onSubmit={this.onSubmit}>\r\n            <div className=\"itemBuscador\">\r\n              <input\r\n                className=\"form-control\"\r\n                id=\"exampleFormControlInput1\"\r\n                name=\"buscador\"\r\n                onChange={this.onInputChange}\r\n                value={this.state.buscador}\r\n                placeholder=\"Buscar\"\r\n              ></input>\r\n            </div>\r\n\r\n            <div className=\"itemBuscador\">\r\n              <select\r\n                className=\"form-control\"\r\n                onChange={this.onInputChange}\r\n                id=\"exampleFormControlSelect1\"\r\n                name=\"autor\"\r\n                value={this.state.autor}\r\n              >\r\n                <option value=\"\" selected>\r\n                  Autor/a\r\n                </option>\r\n                {this.state.autores.map((autor) => (\r\n                  <option key={autor._id} value={autor._id}>\r\n                    {autor.nombre} {autor.apellido}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"itemBuscador\">\r\n              <select\r\n                className=\"form-control\"\r\n                value={this.state.genero}\r\n                onChange={this.onInputChange}\r\n                id=\"exampleFormControlSelect1\"\r\n                name=\"genero\"\r\n              >\r\n                <option value=\"\">Género</option>\r\n                {this.state.generos.map((ge) => (\r\n                  <option key={ge._id} value={ge._id}>\r\n                    {ge.nombre}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"itemBuscador\">\r\n              <select\r\n                className=\"form-control\"\r\n                onChange={this.onInputChange}\r\n                id=\"exampleFormControlSelect1\"\r\n                name=\"editorial\"\r\n                value={this.state.editorial}\r\n              >\r\n                <option value=\"\">Editorial</option>\r\n                {this.state.editoriales.map((ed) => (\r\n                  <option key={ed.id} value={ed._id}>\r\n                    {ed.nombre}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            <button type=\"submit\" className=\"btn btn-light itemBoton  \">\r\n              <svg\r\n                class=\"bi bi-search\"\r\n                width=\"1em\"\r\n                height=\"1em\"\r\n                viewBox=\"0 0 16 16\"\r\n                fill=\"currentColor\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n              >\r\n                <path\r\n                  fill-rule=\"evenodd\"\r\n                  d=\"M10.442 10.442a1 1 0 0 1 1.415 0l3.85 3.85a1 1 0 0 1-1.414 1.415l-3.85-3.85a1 1 0 0 1 0-1.415z\"\r\n                />\r\n                <path\r\n                  fill-rule=\"evenodd\"\r\n                  d=\"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z\"\r\n                />\r\n              </svg>\r\n            </button>\r\n            <button onClick={this.limpiar} className=\"btn btn-light itemBoton \">\r\n              <svg\r\n                class=\"bi bi-backspace\"\r\n                width=\"1em\"\r\n                height=\"1em\"\r\n                viewBox=\"0 0 16 16\"\r\n                fill=\"currentColor\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n              >\r\n                <path\r\n                  fill-rule=\"evenodd\"\r\n                  d=\"M6.603 2h7.08a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-7.08a1 1 0 0 1-.76-.35L1 8l4.844-5.65A1 1 0 0 1 6.603 2zm7.08-1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7.08a2 2 0 0 1-1.519-.698L.241 8.65a1 1 0 0 1 0-1.302L5.084 1.7A2 2 0 0 1 6.603 1h7.08z\"\r\n                />\r\n                <path\r\n                  fill-rule=\"evenodd\"\r\n                  d=\"M5.83 5.146a.5.5 0 0 0 0 .708l5 5a.5.5 0 0 0 .707-.708l-5-5a.5.5 0 0 0-.708 0z\"\r\n                />\r\n                <path\r\n                  fill-rule=\"evenodd\"\r\n                  d=\"M11.537 5.146a.5.5 0 0 1 0 .708l-5 5a.5.5 0 0 1-.708-.708l5-5a.5.5 0 0 1 .707 0z\"\r\n                />\r\n              </svg>\r\n            </button>\r\n          </form>\r\n        </div>\r\n\r\n        <div className=\"carrusel\">\r\n          <Slider {...settings}>\r\n            {this.state.librosConFiltro.map((libro) => (\r\n              <div className=\"container-VerLibro\">\r\n                <div className=\"box\">\r\n                  <Link\r\n                    className=\"imgBx\"\r\n                    to={\"/suscriptor/libros/\" + libro._id}\r\n                  >\r\n                    <img src={portada + libro.portada} />\r\n                  </Link>\r\n                  <span className=\"content\">\r\n                    <span>\r\n                      <br></br>\r\n                      <h2 className=\"titulo\"> {libro.titulo} </h2>\r\n                    </span>\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </Slider>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}