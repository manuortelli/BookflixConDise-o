{"ast":null,"code":"var _jsxFileName = \"D:\\\\Documentos\\\\GitHub\\\\bookflix\\\\BookflixConDisenio\\\\front-end\\\\src\\\\components\\\\HomePerfiles.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Redirect } from 'react-router-dom';\nimport ItemPerfil from './ItemPerfil';\nimport { Link } from 'react-router-dom';\nimport HomeSuscriptor from './VistaSuscriptor/HomeSuscriptor'; //Poner constante a la cual le hacemos la consulta de nuestros pefiles como suscriptor\n\nconst perfilesApi = 'http://localhost:4000/api/suscriptores/loginPerfiles';\nconst loginPerfilApi = 'http://localhost:4000/api/suscriptores/loginPerfil';\n\nclass ListarPerfiles extends Component {\n  constructor() {\n    super();\n\n    this.irAHomeDePerfil = async event => {\n      await axios.post(loginPerfilApi, {\n        id: this.state.perfiles[0]\n      }, {\n        headers: {\n          'xaccess': sessionStorage.getItem('token')\n        }\n      }).then(res => {\n        console.log(res.data);\n        const {\n          user,\n          token\n        } = res.data;\n        sessionStorage.setItem('token', token);\n        sessionStorage.setItem('perfil', user);\n        this.setState({\n          perfilselected: true\n        });\n      });\n    };\n\n    this.state = {\n      token: sessionStorage.getItem('token'),\n      perfiles: [],\n      perfilesNombre: [],\n      perfilselected: false\n    };\n  }\n\n  async componentDidMount() {\n    var perfilesid = new Array(),\n        perfilesNombre1 = new Array();\n    await axios.get(perfilesApi, {\n      headers: {\n        'xaccess': sessionStorage.getItem('token')\n      }\n    }).then(res => {\n      res.data.map(info => {\n        {\n          perfilesid.push(info.id);\n        }\n        {\n          perfilesNombre1.push(info.nombre);\n        }\n      });\n    });\n    this.setState({\n      perfiles: perfilesid,\n      perfilesNombre: perfilesNombre1\n    });\n    console.log(this.state.perfiles[0]);\n    console.log(this.state.perfilesNombre[0]);\n    console.log(this.state.perfilesNombre);\n  }\n\n  render() {\n    return this.state.token === '' || this.state.perfilselected == false ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cardPerfil col-md-6 offset-md-3 text-light bg-dark \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 25\n      }\n    }, \"Perfiles:\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 29\n      }\n    }, this.state.perfilesNombre[0]), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btnPerfil float-right login_btn\",\n      onClick: this.irAHomeDePerfil,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 29\n      }\n    }, \"Ingresar\")))) : /*#__PURE__*/React.createElement(HomeSuscriptor, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 19\n      }\n    });\n  }\n\n}\n\nexport default ListarPerfiles;","map":{"version":3,"sources":["D:/Documentos/GitHub/bookflix/BookflixConDisenio/front-end/src/components/HomePerfiles.js"],"names":["React","Component","axios","Redirect","ItemPerfil","Link","HomeSuscriptor","perfilesApi","loginPerfilApi","ListarPerfiles","constructor","irAHomeDePerfil","event","post","id","state","perfiles","headers","sessionStorage","getItem","then","res","console","log","data","user","token","setItem","setState","perfilselected","perfilesNombre","componentDidMount","perfilesid","Array","perfilesNombre1","get","map","info","push","nombre","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport { Redirect } from 'react-router-dom';\r\nimport ItemPerfil from './ItemPerfil';\r\nimport { Link } from 'react-router-dom';\r\nimport HomeSuscriptor from './VistaSuscriptor/HomeSuscriptor';\r\n\r\n\r\n\r\n//Poner constante a la cual le hacemos la consulta de nuestros pefiles como suscriptor\r\nconst perfilesApi = 'http://localhost:4000/api/suscriptores/loginPerfiles'\r\nconst loginPerfilApi = 'http://localhost:4000/api/suscriptores/loginPerfil'\r\n\r\nclass ListarPerfiles extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            token: sessionStorage.getItem('token'),\r\n            perfiles: [],\r\n            perfilesNombre: [],\r\n            perfilselected: false\r\n\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    irAHomeDePerfil = async (event) => {\r\n\r\n        await axios.post(loginPerfilApi,\r\n            { id: this.state.perfiles[0] },\r\n            {\r\n                headers: { 'xaccess': sessionStorage.getItem('token') }\r\n            })\r\n            .then(res => {\r\n                console.log(res.data)\r\n                const { user, token } = res.data;\r\n                sessionStorage.setItem('token', token);\r\n                sessionStorage.setItem('perfil', user);\r\n                this.setState({ perfilselected: true });\r\n            });\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n    async componentDidMount() {\r\n        var perfilesid = new Array(), perfilesNombre1 = new Array()\r\n        await axios.get(perfilesApi,\r\n            { headers: { 'xaccess': sessionStorage.getItem('token') } }\r\n        )\r\n            .then(res => {\r\n                res.data.map(info => {\r\n                    { perfilesid.push(info.id) }\r\n                    { perfilesNombre1.push(info.nombre) }\r\n\r\n                })\r\n\r\n\r\n            });\r\n\r\n        this.setState({\r\n            perfiles: perfilesid,\r\n            perfilesNombre: perfilesNombre1\r\n\r\n        })\r\n\r\n\r\n\r\n        console.log(this.state.perfiles[0])\r\n        console.log(this.state.perfilesNombre[0])\r\n        console.log(this.state.perfilesNombre)\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n\r\n        return (\r\n            (this.state.token === '' || this.state.perfilselected == false) ?\r\n                <div className=\"container\">\r\n                    <div className=\"cardPerfil col-md-6 offset-md-3 text-light bg-dark \" >\r\n                        <h3 className=\"card-header\">Perfiles:</h3>\r\n                        <div className=\"card-header\">\r\n                            <h3>{this.state.perfilesNombre[0]}</h3>\r\n                            <button className=\"btnPerfil float-right login_btn\" onClick={this.irAHomeDePerfil}>\r\n                                Ingresar\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                : <HomeSuscriptor></HomeSuscriptor>\r\n\r\n\r\n\r\n\r\n\r\n        )\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\nexport default ListarPerfiles;\r\n"]},"metadata":{},"sourceType":"module"}