{"ast":null,"code":"var _jsxFileName = \"D:\\\\Documentos\\\\GitHub\\\\bf\\\\front-end\\\\src\\\\components\\\\VistaSuscriptor\\\\ModificarSuscripcion.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios'; //Constante a la cual hacemos la consulta\n\nconst suscriptores = 'http://localhost:4000/api/suscriptores/me';\nconst modificar = 'http://localhost:4000/api/suscriptores/modificar/';\nexport default class MiSuscripcion extends Component {\n  constructor() {\n    super();\n\n    this.getData = async () => {\n      await axios.get(suscriptores, {\n        headers: {\n          'xaccess': this.state.token\n        }\n      }).then(res => {\n        this.setSusripcion(res.data);\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.onInputChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.state = {\n      token: sessionStorage.getItem('token'),\n      id: '',\n      nombre: '',\n      email: '',\n      password: '',\n      suscripcion: '',\n      dni: '',\n      rta: '',\n      añoE: '',\n      mesE: '',\n      perfiles: '',\n      valorInicial: ''\n    };\n    this.modificarSuscriptor = this.modificarSuscriptor.bind(this);\n    this.onInputChange = this.onInputChange.bind(this);\n  }\n\n  setSusripcion(res) {\n    console.log(\"Respuesta del servidor\", res);\n    this.setState({\n      id: res._id,\n      nombre: res.nombre,\n      email: res.email,\n      dni: res.dni,\n      suscripcion: res.suscripcion,\n      valorInicial: res.suscripcion,\n      perfiles: res.perfiles,\n      numT: '',\n      codT: ''\n    });\n    console.log(\"Cantidad de perfiles\", this.state.perfiles.length);\n  }\n\n  async componentDidMount() {\n    this.getData();\n  }\n\n  async modificarSuscriptor(event) {\n    event.preventDefault();\n\n    if (this.state.valorInicial !== this.state.suscripcion) {\n      if (this.state.numT === '' || this.state.codT === '' || this.state.añoE === '' || this.state.mesE === '') {\n        return alert('Ingrese los datos de la tarjeta');\n      }\n\n      if (this.state.numT.length != 16) {\n        return alert('Pruebe con una tarjeta que contenga 16 dígitos');\n      } else if (this.state.codT.length != 3) {\n        return alert('Ingrese un código de seguridad de 3 dígitos');\n      }\n\n      if (this.state.añoE == '' || this.state.mesE == '') {\n        return alert('Ingrese MES y AÑO de expiración de su tarjeta');\n      } else {\n        if (this.state.añoE.length == 2) {\n          var aux = parseInt(this.state.añoE);\n\n          if (aux == 20) {\n            var aux2 = parseInt(this.state.mesE);\n\n            if (aux2 < 5) {\n              return alert('Ingrese una tarjeta que no esté vencida');\n            }\n          } else if (aux < 20) {\n            return alert('Ingrese una tarjeta que no esté vencida');\n          }\n        } else if (this.state.añoE.length == 4) {\n          var aux = parseInt(this.state.añoE);\n\n          if (aux == 2020) {\n            var aux2 = parseInt(this.state.mesE);\n\n            if (aux2 < 5) {\n              return alert('Ingrese una tarjeta que no esté vencida');\n            }\n          } else if (aux < 2020) {\n            return alert('Ingrese una tarjeta que no esté vencida');\n          }\n        }\n      }\n\n      if (this.state.valorInicial == \"PREMIUM\" && this.state.suscripcion === \"REGULAR\" && this.state.perfiles.length > 2) {\n        return alert(\"No puede cambiar su suscripción a REGULAR ya que posee mas de 2 perfiles, elimine alguno de ellos y vuelva a intentar\");\n      }\n    }\n\n    await axios.post(modificar, {\n      id: this.state.id,\n      email: this.state.email,\n      nombre: this.state.nombre,\n      suscripcion: this.state.suscripcion,\n      dni: this.state.dni,\n      password: this.state.password\n    }, {\n      headers: {\n        'xaccess': this.state.token\n      }\n    }).then(res => {\n      console.log(res.data);\n      alert(JSON.stringify(res.data.msg));\n\n      if (this.state.suscripcion == \"PREMIUM\") {\n        alert(\"Ahora puede tener hasta 4 perfiles\");\n      }\n\n      return window.location = '/suscriptor/suscripcion';\n    }).catch(err => {\n      alert(JSON.stringify(err.response.data.msg));\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-novedad\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 offset-md-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cardMS card-body text-light bg-dark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 14\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.modificarSuscriptor,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 14\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 14\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }\n    }, \"Mi Suscripci\\xF3n\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 17\n      }\n    }, \"Nombre\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"nombre\",\n      name: \"nombre\",\n      onChange: this.onInputChange,\n      Value: this.state.nombre,\n      placeholder: \"Ingrese su nombre\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"email\",\n      name: \"email\",\n      onChange: this.onInputChange,\n      Value: this.state.email,\n      placeholder: \"Ingrese su Email\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 17\n      }\n    }, \"DNI \"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"dni\",\n      name: \"dni\",\n      onChange: this.onInputChange,\n      value: this.state.dni,\n      placeholder: \"Ingrese su DNI\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"btn-group btn-group-toggle\",\n      \"data-toggle\": \"buttons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 17\n      }\n    }, \" Su tipo de suscripci\\xF3n actual es \", this.state.valorInicial, \".\")), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 25\n      }\n    }, \"Si desea modificarla, ingrese la selecci\\xF3n y los campos de la tarjeta nuevamente \"), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"btn-group btn-group-toggle\",\n      \"data-toggle\": \"buttons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 25\n      }\n    }, \" \", /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      class: \"btn btn-outline-danger\",\n      onClick: this.onInputChange,\n      name: \"suscripcion\",\n      value: \"REGULAR\",\n      \"data-toggle\": \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 33\n      }\n    }, \" REGULAR\"), \" \"), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 25\n      }\n    }, \" \", /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      class: \"btn btn-outline-danger\",\n      onClick: this.onInputChange,\n      name: \"suscripcion\",\n      value: \"PREMIUM\",\n      \"data-toggle\": \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 33\n      }\n    }, \" PREMIUM\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 29\n      }\n    }, \"N\\xFAmero de tarjeta  \"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"numT\",\n      name: \"numT\",\n      onChange: this.onInputChange,\n      value: this.state.numT,\n      placeholder: \"Ingrese n\\xFAmero de tarjeta, deber\\xE1 contener 16 digitos\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 29\n      }\n    }, \"Codigo De Tarjeta\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"codT\",\n      name: \"codT\",\n      onChange: this.onInputChange,\n      value: this.state.codT,\n      placeholder: \"Ingrese el codigo de su tajeta\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 17\n      }\n    }, \"Fecha de expiracion\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      className: \"form-control\",\n      id: \"mesE\",\n      name: \"mesE\",\n      onChange: this.onInputChange,\n      value: this.state.mesE,\n      placeholder: \"MES\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      className: \"form-control\",\n      id: \"a\\xF1oE\",\n      name: \"a\\xF1oE\",\n      onChange: this.onInputChange,\n      value: this.state.añoE,\n      placeholder: \"A\\xD1O\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 17\n      }\n    }, \"Contrase\\xF1a\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"password\",\n      id: \"password\",\n      name: \"password\",\n      onChange: this.onInputChange,\n      Value: \"\",\n      required: true,\n      placeholder: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-danger btn-lg btn-block \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 17\n      }\n    }, \"Modificar\")))))));\n  }\n\n}","map":{"version":3,"sources":["D:/Documentos/GitHub/bf/front-end/src/components/VistaSuscriptor/ModificarSuscripcion.js"],"names":["React","Component","axios","suscriptores","modificar","MiSuscripcion","constructor","getData","get","headers","state","token","then","res","setSusripcion","data","catch","err","console","log","onInputChange","event","setState","target","name","value","sessionStorage","getItem","id","nombre","email","password","suscripcion","dni","rta","añoE","mesE","perfiles","valorInicial","modificarSuscriptor","bind","_id","numT","codT","length","componentDidMount","preventDefault","alert","aux","parseInt","aux2","post","JSON","stringify","msg","window","location","response","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\n\r\nimport axios from 'axios';\r\n\r\n\r\n//Constante a la cual hacemos la consulta\r\nconst suscriptores= 'http://localhost:4000/api/suscriptores/me';\r\nconst modificar='http://localhost:4000/api/suscriptores/modificar/';\r\n\r\n\r\nexport default class MiSuscripcion extends Component {\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            token: sessionStorage.getItem('token'),\r\n\r\n            id: '',\r\n            nombre: '',\r\n            email: '',\r\n            password: '',\r\n            suscripcion:'',    \r\n            dni:'',\r\n            rta:'',\r\n            añoE:'',\r\n            mesE:'',\r\n            perfiles:'',\r\n\r\n\r\n            valorInicial:'',     \r\n        };\r\n       \r\n\r\n        this.modificarSuscriptor = this.modificarSuscriptor.bind(this);\r\n        this.onInputChange = this.onInputChange.bind(this);\r\n\r\n        \r\n    }\r\n    \r\n    \r\n\r\n    setSusripcion(res){\r\n        console.log(\"Respuesta del servidor\", res)\r\n        this.setState({\r\n            id: res._id,\r\n            nombre: res.nombre,\r\n            email: res.email,\r\n            dni: res.dni, \r\n            suscripcion: res.suscripcion,\r\n            valorInicial: res.suscripcion,\r\n            perfiles: res.perfiles,\r\n            numT: '',\r\n            codT:'',\r\n            \r\n        });\r\n\r\n        console.log(\"Cantidad de perfiles\", this.state.perfiles.length)\r\n    }\r\n\r\n    \r\n\r\n    getData = async () =>{\r\n        await axios.get(suscriptores,{\r\n            headers:{'xaccess':this.state.token}  \r\n        })\r\n        .then(res =>{\r\n            this.setSusripcion(res.data);\r\n        })\r\n        .catch(err =>{console.log(err)})\r\n            \r\n    }\r\n\r\n    async componentDidMount(){\r\n        \r\n        this.getData();\r\n        \r\n    }\r\n\r\n    onInputChange = (event) => {\r\n        this.setState({\r\n            [event.target.name]: event.target.value\r\n        })\r\n    };\r\n\r\n   \r\n    async modificarSuscriptor(event){\r\n        \r\n        event.preventDefault();  \r\n        \r\n        if(this.state.valorInicial !== this.state.suscripcion){\r\n           \r\n            if(this.state.numT==='' || this.state.codT==='' || this.state.añoE ==='' || this.state.mesE=== ''){\r\n                return (alert('Ingrese los datos de la tarjeta'));\r\n            }\r\n\r\n            if (this.state.numT.length != 16){\r\n                return alert('Pruebe con una tarjeta que contenga 16 dígitos')\r\n            }\r\n            else if (this.state.codT.length != 3){\r\n                return alert('Ingrese un código de seguridad de 3 dígitos')\r\n            }\r\n    \r\n            if ( this.state.añoE == '' || this.state.mesE == ''){\r\n                return alert('Ingrese MES y AÑO de expiración de su tarjeta')\r\n            }\r\n            else{\r\n                if(this.state.añoE.length == 2 ){\r\n                    var aux = parseInt(this.state.añoE);\r\n                    \r\n                    if(aux == 20 ){\r\n                        var aux2 = parseInt(this.state.mesE);\r\n                        if(aux2 < 5){\r\n                            return alert('Ingrese una tarjeta que no esté vencida')\r\n                        }\r\n                    }else if (aux < 20){\r\n                        return alert('Ingrese una tarjeta que no esté vencida')\r\n                    }\r\n               \r\n                }else if(this.state.añoE.length == 4 ){\r\n                    var aux = parseInt(this.state.añoE);\r\n                    if(aux == 2020){\r\n                        var aux2 = parseInt(this.state.mesE);\r\n                        if(aux2 < 5){\r\n                            return alert('Ingrese una tarjeta que no esté vencida')\r\n                        }\r\n                    } else if (aux < 2020){\r\n                        return alert('Ingrese una tarjeta que no esté vencida')\r\n                    }\r\n                }\r\n            } \r\n\r\n            \r\n                 if (this.state.valorInicial == \"PREMIUM\" && this.state.suscripcion === \"REGULAR\" && this.state.perfiles.length>2){\r\n                     return alert (\"No puede cambiar su suscripción a REGULAR ya que posee mas de 2 perfiles, elimine alguno de ellos y vuelva a intentar\")\r\n                 }\r\n            \r\n\r\n        }\r\n             \r\n        \r\n        await axios.post(modificar, {\r\n                    id: this.state.id,\r\n                    email: this.state.email,\r\n                    nombre: this.state.nombre,\r\n                    suscripcion: this.state.suscripcion,\r\n                    dni: this.state.dni,\r\n                    password:this.state.password,\r\n                }\r\n                , { headers: { 'xaccess': this.state.token } })\r\n                .then(res => {\r\n                    console.log(res.data)\r\n                    alert(JSON.stringify(res.data.msg))\r\n                    if (this.state.suscripcion==\"PREMIUM\"){\r\n                        alert(\"Ahora puede tener hasta 4 perfiles\")\r\n                    }\r\n                    return (window.location = '/suscriptor/suscripcion')\r\n                })\r\n                .catch(err => {\r\n                    alert(JSON.stringify(err.response.data.msg))\r\n                });\r\n\r\n    }\r\n   \r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n            <div className=\"form-novedad\" >\r\n            <div className=\"col-md-6 offset-md-3\">\r\n             <div className=\"cardMS card-body text-light bg-dark\">\r\n\r\n             <form onSubmit={this.modificarSuscriptor} >\r\n\r\n             <div className=\"card-header\">\r\n\t\t\t\t    <h3>Mi Suscripción</h3>\r\n\t\t\t    </div>\r\n                <div className=\"form-group\">\r\n                <label className=\"text-light\">Nombre\r\n                </label>\r\n                <input \r\n                    className=\"form-control\" \r\n                    id=\"nombre\" \r\n                    name =\"nombre\"\r\n                    onChange={this.onInputChange}\r\n                    Value={this.state.nombre}\r\n                    placeholder=\"Ingrese su nombre\"\r\n                    required>\r\n                </input>    \r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                <label className=\"text-light\">Email\r\n                </label>\r\n                <input \r\n                    className=\"form-control\" \r\n                    id=\"email\" \r\n                    name =\"email\"\r\n                    onChange={this.onInputChange}\r\n                    Value={this.state.email}\r\n                    placeholder=\"Ingrese su Email\"\r\n                    required\r\n                    >\r\n                </input>    \r\n                </div>\r\n               \r\n                \r\n                <div className=\"form-group\">\r\n                <label className=\"text-light\">DNI </label>\r\n                <input \r\n                    className=\"form-control\" \r\n                    id=\"dni\" \r\n                    name =\"dni\"\r\n                    onChange={this.onInputChange}\r\n                    value={this.state.dni}\r\n                    placeholder=\"Ingrese su DNI\"\r\n                    required>\r\n                </input>    \r\n            </div>\r\n\r\n                <div class=\"btn-group btn-group-toggle\" data-toggle=\"buttons\">\r\n                <label className=\"text-light\"> Su tipo de suscripción actual es {this.state.valorInicial}.</label>\r\n            \r\n                </div>\r\n           \r\n                        <div>\r\n                        \r\n                        <label className=\"text-light\">Si desea modificarla, ingrese la selección y los campos de la tarjeta nuevamente </label>\r\n                        <div class=\"btn-group btn-group-toggle\" data-toggle=\"buttons\">\r\n                        \r\n                        <label> <button type=\"button\" class=\"btn btn-outline-danger\" onClick={this.onInputChange} name=\"suscripcion\" value=\"REGULAR\" data-toggle=\"button\"> REGULAR</button> </label>\r\n                        <label> <button type=\"button\" class=\"btn btn-outline-danger\" onClick={this.onInputChange} name=\"suscripcion\" value=\"PREMIUM\" data-toggle=\"button\"> PREMIUM</button></label>\r\n                        \r\n                        </div>\r\n\r\n                        <div className=\"form-group\">\r\n                            <label className=\"text-light\">Número de tarjeta  </label>\r\n                            <input \r\n                                className=\"form-control\" \r\n                                id=\"numT\" \r\n                                name =\"numT\"\r\n                                onChange={this.onInputChange}\r\n                                value={this.state.numT}\r\n                                placeholder=\"Ingrese número de tarjeta, deberá contener 16 digitos\">\r\n                            </input>    \r\n                        </div>\r\n\r\n                        <div className=\"form-group\">\r\n                            <label className=\"text-light\">Codigo De Tarjeta\r\n                            </label>\r\n                            <input \r\n                                className=\"form-control\" \r\n                                id=\"codT\" \r\n                                name =\"codT\"\r\n                                onChange={this.onInputChange}\r\n                                value={this.state.codT}\r\n                                placeholder=\"Ingrese el codigo de su tajeta\">\r\n                            </input>    \r\n                        </div>\r\n                    </div>\r\n                   \r\n                  \r\n                    \r\n                \r\n                <div className=\"form-group\">\r\n                <label className=\"text-light\">Fecha de expiracion\r\n                </label>\r\n                <input \r\n                    type=\"number\"\r\n                    className=\"form-control\" \r\n                    id=\"mesE\" \r\n                    name =\"mesE\"\r\n                    onChange={this.onInputChange}\r\n                    value={this.state.mesE}\r\n                    placeholder=\"MES\">\r\n                </input>    \r\n                </div>\r\n                <input \r\n                    type=\"number\"\r\n                    className=\"form-control\" \r\n                    id=\"añoE\" \r\n                    name =\"añoE\"\r\n                    onChange={this.onInputChange}\r\n                    value={this.state.añoE}\r\n                    placeholder=\"AÑO\">\r\n                </input>    \r\n            \r\n\r\n            <div className=\"form-group\">\r\n                <label className=\"text-light\">Contraseña\r\n                </label>\r\n                <input \r\n                    className=\"form-control\" \r\n                    type=\"password\"\r\n                    id=\"password\" \r\n                    name =\"password\"\r\n                    onChange={this.onInputChange}\r\n                    Value=\"\"\r\n                    required\r\n                    placeholder=\"\"\r\n                    >\r\n                </input>    \r\n                \r\n            </div>\r\n         \r\n            \r\n            <div className=\"form-group\">\r\n                <button  type=\"submit\" className=\"btn btn-danger btn-lg btn-block \"\r\n                        >\r\n                    Modificar \r\n                </button>\r\n            </div>\r\n\r\n            </form>\r\n            </div>\r\n            </div>\r\n            </div>\r\n           \r\n\r\n        </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}