{"ast":null,"code":"var _jsxFileName = \"/home/manuel/bookflixdise\\xF1o/BookflixConDisenio/front-end/src/components/HomePerfiles.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Redirect } from 'react-router-dom';\nimport ItemPerfil from './ItemPerfil';\nimport { Link } from 'react-router-dom';\nimport HomeSuscriptor from './VistaSuscriptor/HomeSuscriptor'; //Poner constante a la cual le hacemos la consulta de nuestros pefiles como suscriptor\n\nconst perfilesApi = 'http://localhost:4000/api/suscriptores/loginPerfiles';\nconst miperfilApi = 'http://localhost:4000/api/perfiles/me';\nconst loginPerfilApi = 'http://localhost:4000/api/suscriptores/loginPerfil';\n\nclass ListarPerfiles extends Component {\n  constructor() {\n    super();\n\n    this.irAHomeDePerfil = async event => {\n      await axios.post(loginPerfilApi, {\n        id: this.state.perfiles[0]\n      }, {\n        headers: {\n          'xaccess': sessionStorage.getItem('token')\n        }\n      }).then(res => {\n        const {\n          user,\n          token\n        } = res.data;\n        sessionStorage.setItem('token', token);\n        this.setState({\n          perfilselected: true\n        });\n      });\n    };\n\n    this.state = {\n      token: sessionStorage.getItem('token'),\n      perfiles: [],\n      perfilesNombre: [],\n      perfilselected: false\n    };\n  }\n\n  async componentDidMount() {\n    var perfilesid = new Array(),\n        perfilesNombre1 = new Array();\n    await axios.get(perfilesApi, {\n      headers: {\n        'xaccess': sessionStorage.getItem('token')\n      }\n    }).then(res => {\n      res.data.map(info => {\n        {\n          perfilesid.push(info.id);\n        }\n        {\n          perfilesNombre1.push(info.nombre);\n        }\n      });\n    });\n    this.setState({\n      perfiles: perfilesid,\n      perfilesNombre: perfilesNombre1\n    });\n    console.log(this.state.perfiles[0]);\n    console.log(this.state.perfilesNombre[0]);\n    console.log(this.state.perfilesNombre);\n  }\n\n  render() {\n    return this.state.token === '' || this.state.perfilselected == false ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn danger\",\n      onClick: this.irAHomeDePerfil,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 21\n      }\n    }, this.state.perfilesNombre[0]))) : /*#__PURE__*/React.createElement(HomeSuscriptor, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 15\n      }\n    });\n  }\n\n}\n\nexport default ListarPerfiles;","map":{"version":3,"sources":["/home/manuel/bookflixdiseÃ±o/BookflixConDisenio/front-end/src/components/HomePerfiles.js"],"names":["React","Component","axios","Redirect","ItemPerfil","Link","HomeSuscriptor","perfilesApi","miperfilApi","loginPerfilApi","ListarPerfiles","constructor","irAHomeDePerfil","event","post","id","state","perfiles","headers","sessionStorage","getItem","then","res","user","token","data","setItem","setState","perfilselected","perfilesNombre","componentDidMount","perfilesid","Array","perfilesNombre1","get","map","info","push","nombre","console","log","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport { Redirect } from 'react-router-dom';\nimport ItemPerfil from './ItemPerfil';\nimport { Link } from 'react-router-dom';\nimport HomeSuscriptor from './VistaSuscriptor/HomeSuscriptor';\n\n\n\n//Poner constante a la cual le hacemos la consulta de nuestros pefiles como suscriptor\nconst perfilesApi = 'http://localhost:4000/api/suscriptores/loginPerfiles'\nconst miperfilApi = 'http://localhost:4000/api/perfiles/me'\nconst loginPerfilApi = 'http://localhost:4000/api/suscriptores/loginPerfil'\n\nclass ListarPerfiles extends Component {\n    constructor() {\n        super();\n        this.state = {\n            token: sessionStorage.getItem('token'),\n            perfiles: [],\n            perfilesNombre: [],\n            perfilselected: false\n\n        }\n\n\n    }\n\n\n\n\n\n    irAHomeDePerfil = async (event) => {\n\n       \n        \n        await axios.post(loginPerfilApi,\n            { id: this.state.perfiles[0] },\n            {\n                headers: { 'xaccess': sessionStorage.getItem('token') }\n            })\n            .then(res => {\n                const { user, token } = res.data;\n                sessionStorage.setItem('token', token);\n               this.setState({perfilselected:true}); \n            });\n\n\n\n    }\n\n\n\n\n    async componentDidMount() {\n        var perfilesid = new Array(), perfilesNombre1 = new Array() \n        await axios.get(perfilesApi,\n            { headers: { 'xaccess': sessionStorage.getItem('token') } }\n        )\n            .then(res => {\n                res.data.map(info => {\n                    { perfilesid.push(info.id) }\n                    { perfilesNombre1.push(info.nombre) }\n                    \n                })\n\n\n            });\n\n            this.setState ({ \n                perfiles: perfilesid,\n                perfilesNombre: perfilesNombre1\n\n            }  )\n        \n           \n\n        console.log(this.state.perfiles[0])\n        console.log(this.state.perfilesNombre[0])\n        console.log(this.state.perfilesNombre)\n        \n\n    }\n\n\n\n    render() {\n\n        return (\n            (this.state.token === '' || this.state.perfilselected == false) ?  \n\n            <div className=\"card\" >\n               \n                    <div>\n                    <button className=\"btn danger\" onClick={this.irAHomeDePerfil}>\n                        {this.state.perfilesNombre[0]}    \n                    </button>        \n                    \n                    </div>\n                    \n            </div>\n\n            : <HomeSuscriptor></HomeSuscriptor>\n            \n            \n            \n                \n            \n        )\n    }\n\n}\n\n\n\nexport default ListarPerfiles;\n"]},"metadata":{},"sourceType":"module"}