{"ast":null,"code":"var _jsxFileName = \"/home/manuel/git/BookflixOficialDonna/bf/front-end/src/components/HomePerfiles.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Redirect } from \"react-router-dom\";\nimport ItemPerfil from \"./ItemPerfil\";\nimport { Link } from \"react-router-dom\";\nimport HomeSuscriptor from \"./VistaSuscriptor/HomeSuscriptor\"; //Poner constante a la cual le hacemos la consulta de nuestros pefiles como suscriptor\n\nconst perfilesApi = \"http://localhost:4000/api/suscriptores/loginPerfiles\";\nconst loginPerfilApi = \"http://localhost:4000/api/suscriptores/loginPerfil\";\n\nclass ListarPerfiles extends Component {\n  constructor() {\n    super();\n\n    this.irAHomeDePerfil = async event => {\n      console.log(this.state.perfiles[0]);\n      await axios.post(loginPerfilApi, {\n        id: this.state.perfiles[0]\n      }, {\n        headers: {\n          xaccess: sessionStorage.getItem(\"token\")\n        }\n      }).then(res => {\n        console.log(res.data.user._id);\n        const {\n          user,\n          token\n        } = res.data;\n        sessionStorage.setItem(\"token\", token);\n        sessionStorage.setItem(\"perfilUser\", JSON.stringify(user));\n        sessionStorage.setItem(\"perfil\", user);\n        sessionStorage.setItem(\"perfilID\", user._id);\n        this.setState({\n          perfilselected: true\n        });\n      });\n      console.log(localStorage.getItem('perfilUser'));\n    };\n\n    this.state = {\n      token: sessionStorage.getItem(\"token\"),\n      perfiles: [],\n      perfilesNombre: [],\n      perfilselected: false\n    };\n  }\n\n  async componentDidMount() {\n    var perfilesid = new Array(),\n        perfilesNombre1 = new Array();\n    await axios.get(perfilesApi, {\n      headers: {\n        xaccess: sessionStorage.getItem(\"token\")\n      }\n    }).then(res => {\n      console.log(res.data);\n      res.data.map(info => {\n        {\n          console.log(info.id);\n          perfilesid.push(info.id);\n        }\n        {\n          perfilesNombre1.push(info.nombre);\n        }\n      });\n    });\n    this.setState({\n      perfiles: perfilesid,\n      perfilesNombre: perfilesNombre1\n    });\n    console.log(this.state.perfiles[0]);\n    console.log(this.state.perfiles[0]);\n    console.log(this.state.perfilesNombre[0]);\n    console.log(this.state.perfilesNombre);\n  }\n\n  render() {\n    return this.state.token === \"\" || this.state.perfilselected == false ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cardPerfil col-md-6 offset-md-3 text-light bg-dark \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }\n    }, \"Perfiles:\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }\n    }, this.state.perfilesNombre[0], /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-outline-danger itemBoton float-right\",\n      onClick: this.irAHomeDePerfil,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }\n    }, \"Ingresar\"))) : /*#__PURE__*/React.createElement(HomeSuscriptor, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 7\n      }\n    });\n  }\n\n}\n\nexport default ListarPerfiles;","map":{"version":3,"sources":["/home/manuel/git/BookflixOficialDonna/bf/front-end/src/components/HomePerfiles.js"],"names":["React","Component","axios","Redirect","ItemPerfil","Link","HomeSuscriptor","perfilesApi","loginPerfilApi","ListarPerfiles","constructor","irAHomeDePerfil","event","console","log","state","perfiles","post","id","headers","xaccess","sessionStorage","getItem","then","res","data","user","_id","token","setItem","JSON","stringify","setState","perfilselected","localStorage","perfilesNombre","componentDidMount","perfilesid","Array","perfilesNombre1","get","map","info","push","nombre","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Redirect } from \"react-router-dom\";\nimport ItemPerfil from \"./ItemPerfil\";\nimport { Link } from \"react-router-dom\";\nimport HomeSuscriptor from \"./VistaSuscriptor/HomeSuscriptor\";\n\n//Poner constante a la cual le hacemos la consulta de nuestros pefiles como suscriptor\nconst perfilesApi = \"http://localhost:4000/api/suscriptores/loginPerfiles\";\nconst loginPerfilApi = \"http://localhost:4000/api/suscriptores/loginPerfil\";\n\nclass ListarPerfiles extends Component {\n  constructor() {\n    super();\n    this.state = {\n      token: sessionStorage.getItem(\"token\"),\n      perfiles: [],\n      perfilesNombre: [],\n      perfilselected: false,\n    };\n  }\n\n  irAHomeDePerfil = async (event) => {\n    console.log(this.state.perfiles[0]);\n    await axios\n      .post(\n        loginPerfilApi,\n        { id: this.state.perfiles[0] },\n        {\n          headers: { xaccess: sessionStorage.getItem(\"token\") },\n        }\n      )\n      .then((res) => {\n        console.log(res.data.user._id);\n\n        const { user, token } = res.data;\n        sessionStorage.setItem(\"token\", token);\n        sessionStorage.setItem(\"perfilUser\", JSON.stringify(user));\n        sessionStorage.setItem(\"perfil\", user);\n        sessionStorage.setItem(\"perfilID\", user._id);\n        this.setState({ perfilselected: true });\n      });\n      console.log(localStorage.getItem('perfilUser'))\n  };\n\n  async componentDidMount() {\n    var perfilesid = new Array(),\n      perfilesNombre1 = new Array();\n    await axios\n      .get(perfilesApi, {\n        headers: { xaccess: sessionStorage.getItem(\"token\") },\n      })\n      .then((res) => {\n        console.log(res.data);\n        res.data.map((info) => {\n          {\n            console.log(info.id);\n            perfilesid.push(info.id);\n          }\n          {\n            perfilesNombre1.push(info.nombre);\n          }\n        });\n      });\n\n    this.setState({\n      perfiles: perfilesid,\n      perfilesNombre: perfilesNombre1,\n    });\n    console.log(this.state.perfiles[0]);\n\n    console.log(this.state.perfiles[0]);\n    console.log(this.state.perfilesNombre[0]);\n    console.log(this.state.perfilesNombre);\n  }\n\n  render() {\n    return this.state.token === \"\" || this.state.perfilselected == false ? (\n        <div className=\"cardPerfil col-md-6 offset-md-3 text-light bg-dark \">\n          <h3 className=\"card-header\">Perfiles:</h3>\n            <br></br>\n            <h3 className=\"card-header\">{this.state.perfilesNombre[0]}\n            <button\n              className=\"btn btn-outline-danger itemBoton float-right\"\n              onClick={this.irAHomeDePerfil}>\n              Ingresar\n            </button>\n            </h3>\n            \n          \n          \n        \n      </div>\n    ) : (\n      <HomeSuscriptor></HomeSuscriptor>\n    );\n  }\n}\n\nexport default ListarPerfiles;\n"]},"metadata":{},"sourceType":"module"}