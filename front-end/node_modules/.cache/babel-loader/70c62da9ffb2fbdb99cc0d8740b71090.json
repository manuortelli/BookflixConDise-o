{"ast":null,"code":"var _jsxFileName = \"/home/manuel/git/BookflixOficialDonna/bf/front-end/src/components/VistaSuscriptor/ModificarSuscripcion.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios'; //Constante a la cual hacemos la consulta\n\nconst suscriptores = 'http://localhost:4000/api/suscriptores/me';\nconst modificar = 'http://localhost:4000/api/suscriptores/modificar/';\nexport default class MiSuscripcion extends Component {\n  constructor() {\n    super();\n\n    this.getData = async () => {\n      await axios.get(suscriptores, {\n        headers: {\n          'xaccess': this.state.token\n        }\n      }).then(res => {\n        this.setSusripcion(res.data);\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.onInputChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.state = {\n      token: sessionStorage.getItem('token'),\n      id: '',\n      nombre: '',\n      email: '',\n      password: '',\n      suscripcion: '',\n      dni: '',\n      rta: '',\n      añoE: '',\n      mesE: '',\n      valorInicial: ''\n    };\n    this.modificarSuscriptor = this.modificarSuscriptor.bind(this);\n    this.onInputChange = this.onInputChange.bind(this);\n  }\n\n  setSusripcion(res) {\n    console.log(\"Respuesta del servidor\", res);\n    this.setState({\n      id: res._id,\n      nombre: res.nombre,\n      email: res.email,\n      dni: res.dni,\n      suscripcion: res.suscripcion,\n      valorInicial: res.suscripcion,\n      numT: '',\n      codT: ''\n    });\n  }\n\n  async componentDidMount() {\n    this.getData();\n  }\n\n  async modificarSuscriptor(event) {\n    event.preventDefault();\n\n    if (this.state.valorInicial !== this.state.suscripcion) {\n      if (this.state.numT === '' || this.state.codT === '' || this.state.añoE === '' || this.state.mesE === '') {\n        return alert('Ingrese los datos de la tarjeta');\n      }\n\n      if (this.state.numT.length != 16) {\n        return alert('Pruebe con una tarjeta que contenga 16 dígitos');\n      } else if (this.state.codT.length != 3) {\n        return alert('Ingrese un código de seguridad de 3 dígitos');\n      }\n\n      if (this.state.añoE == '' || this.state.mesE == '') {\n        return alert('Ingrese MES y AÑO de expiración de su tarjeta');\n      } else {\n        if (this.state.añoE.length == 2) {\n          var aux = parseInt(this.state.añoE);\n\n          if (aux == 20) {\n            var aux2 = parseInt(this.state.mesE);\n\n            if (aux2 < 5) {\n              return alert('Ingrese una tarjeta que no esté vencida');\n            }\n          } else if (aux < 20) {\n            return alert('Ingrese una tarjeta que no esté vencida');\n          }\n        } else if (this.state.añoE.length == 4) {\n          var aux = parseInt(this.state.añoE);\n\n          if (aux == 2020) {\n            var aux2 = parseInt(this.state.mesE);\n\n            if (aux2 < 5) {\n              return alert('Ingrese una tarjeta que no esté vencida');\n            }\n          } else if (aux < 2020) {\n            return alert('Ingrese una tarjeta que no esté vencida');\n          }\n        }\n      } // if (this.state.valorInicial == \"REGULAR\")\n\n    }\n\n    await axios.post(modificar, {\n      id: this.state.id,\n      email: this.state.email,\n      nombre: this.state.nombre,\n      suscripcion: this.state.suscripcion,\n      dni: this.state.dni,\n      password: this.state.password\n    }, {\n      headers: {\n        'xaccess': this.state.token\n      }\n    }).then(res => {\n      console.log(res.data);\n      alert(JSON.stringify(res.data));\n    }).catch(err => {\n      alert(JSON.stringify(err.response.data.msg));\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-novedad\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 offset-md-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cardMS card-body text-light bg-dark\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 14\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.modificarSuscriptor,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 14\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 14\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }\n    }, \"Mi Suscripci\\xF3n\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 17\n      }\n    }, \"Nombre\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"nombre\",\n      name: \"nombre\",\n      onChange: this.onInputChange,\n      Value: this.state.nombre,\n      placeholder: \"Ingrese su nombre\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 17\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"email\",\n      name: \"email\",\n      onChange: this.onInputChange,\n      Value: this.state.email,\n      placeholder: \"Ingrese su Email\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 17\n      }\n    }, \"DNI \"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"dni\",\n      name: \"dni\",\n      onChange: this.onInputChange,\n      value: this.state.dni,\n      placeholder: \"Ingrese su DNI\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"btn-group btn-group-toggle\",\n      \"data-toggle\": \"buttons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 17\n      }\n    }, \" Su tipo de suscripci\\xF3n actual es \", this.state.valorInicial, \".\")), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 25\n      }\n    }, \"Si desea modificarla, ingrese la selecci\\xF3n y los campos de la tarjeta nuevamente \"), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"btn-group btn-group-toggle\",\n      \"data-toggle\": \"buttons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 25\n      }\n    }, \" \", /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      class: \"btn btn-outline-danger\",\n      onClick: this.onInputChange,\n      name: \"suscripcion\",\n      value: \"REGULAR\",\n      \"data-toggle\": \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 33\n      }\n    }, \" REGULAR\"), \" \"), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 25\n      }\n    }, \" \", /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      class: \"btn btn-outline-danger\",\n      onClick: this.onInputChange,\n      name: \"suscripcion\",\n      value: \"PREMIUM\",\n      \"data-toggle\": \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 33\n      }\n    }, \" PREMIUM\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 29\n      }\n    }, \"N\\xFAmero de tarjeta  \"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"numT\",\n      name: \"numT\",\n      onChange: this.onInputChange,\n      value: this.state.numT,\n      placeholder: \"Ingrese n\\xFAmero de tarjeta, deber\\xE1 contener 16 digitos\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 29\n      }\n    }, \"Codigo De Tarjeta\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      id: \"codT\",\n      name: \"codT\",\n      onChange: this.onInputChange,\n      value: this.state.codT,\n      placeholder: \"Ingrese el codigo de su tajeta\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 17\n      }\n    }, \"Fecha de expiracion\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      className: \"form-control\",\n      id: \"mesE\",\n      name: \"mesE\",\n      onChange: this.onInputChange,\n      value: this.state.mesE,\n      placeholder: \"MES\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      className: \"form-control\",\n      id: \"a\\xF1oE\",\n      name: \"a\\xF1oE\",\n      onChange: this.onInputChange,\n      value: this.state.añoE,\n      placeholder: \"A\\xD1O\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"text-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 17\n      }\n    }, \"Contrase\\xF1a\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"password\",\n      id: \"password\",\n      name: \"password\",\n      onChange: this.onInputChange,\n      Value: \"\",\n      required: true,\n      placeholder: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-danger btn-lg btn-block \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 17\n      }\n    }, \"Modificar\")))))));\n  }\n\n}","map":{"version":3,"sources":["/home/manuel/git/BookflixOficialDonna/bf/front-end/src/components/VistaSuscriptor/ModificarSuscripcion.js"],"names":["React","Component","axios","suscriptores","modificar","MiSuscripcion","constructor","getData","get","headers","state","token","then","res","setSusripcion","data","catch","err","console","log","onInputChange","event","setState","target","name","value","sessionStorage","getItem","id","nombre","email","password","suscripcion","dni","rta","añoE","mesE","valorInicial","modificarSuscriptor","bind","_id","numT","codT","componentDidMount","preventDefault","alert","length","aux","parseInt","aux2","post","JSON","stringify","response","msg","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport axios from 'axios';\n\n\n//Constante a la cual hacemos la consulta\nconst suscriptores= 'http://localhost:4000/api/suscriptores/me';\nconst modificar='http://localhost:4000/api/suscriptores/modificar/';\n\n\nexport default class MiSuscripcion extends Component {\n    constructor(){\n        super();\n        this.state = {\n            token: sessionStorage.getItem('token'),\n\n            id: '',\n            nombre: '',\n            email: '',\n            password: '',\n            suscripcion:'',    \n            dni:'',\n            rta:'',\n            añoE:'',\n            mesE:'',\n\n\n            valorInicial:'',     \n        };\n       \n\n        this.modificarSuscriptor = this.modificarSuscriptor.bind(this);\n        this.onInputChange = this.onInputChange.bind(this);\n\n        \n    }\n    \n    \n\n    setSusripcion(res){\n        console.log(\"Respuesta del servidor\", res)\n        this.setState({\n            id: res._id,\n            nombre: res.nombre,\n            email: res.email,\n            dni: res.dni, \n            suscripcion: res.suscripcion,\n            valorInicial: res.suscripcion,\n            numT: '',\n            codT:'',\n            \n        });\n\n      \n    }\n\n    \n\n    getData = async () =>{\n        await axios.get(suscriptores,{\n            headers:{'xaccess':this.state.token}  \n        })\n        .then(res =>{\n            this.setSusripcion(res.data);\n        })\n        .catch(err =>{console.log(err)})\n            \n    }\n\n    async componentDidMount(){\n        \n        this.getData();\n        \n    }\n\n    onInputChange = (event) => {\n        this.setState({\n            [event.target.name]: event.target.value\n        })\n    };\n\n   \n    async modificarSuscriptor(event){\n        \n        event.preventDefault();  \n        \n        if(this.state.valorInicial !== this.state.suscripcion){\n           \n            if(this.state.numT==='' || this.state.codT==='' || this.state.añoE ==='' || this.state.mesE=== ''){\n                return (alert('Ingrese los datos de la tarjeta'));\n            }\n\n            if (this.state.numT.length != 16){\n                return alert('Pruebe con una tarjeta que contenga 16 dígitos')\n            }\n            else if (this.state.codT.length != 3){\n                return alert('Ingrese un código de seguridad de 3 dígitos')\n            }\n    \n            if ( this.state.añoE == '' || this.state.mesE == ''){\n                return alert('Ingrese MES y AÑO de expiración de su tarjeta')\n            }\n            else{\n                if(this.state.añoE.length == 2 ){\n                    var aux = parseInt(this.state.añoE);\n                    \n                    if(aux == 20 ){\n                        var aux2 = parseInt(this.state.mesE);\n                        if(aux2 < 5){\n                            return alert('Ingrese una tarjeta que no esté vencida')\n                        }\n                    }else if (aux < 20){\n                        return alert('Ingrese una tarjeta que no esté vencida')\n                    }\n               \n                }else if(this.state.añoE.length == 4 ){\n                    var aux = parseInt(this.state.añoE);\n                    if(aux == 2020){\n                        var aux2 = parseInt(this.state.mesE);\n                        if(aux2 < 5){\n                            return alert('Ingrese una tarjeta que no esté vencida')\n                        }\n                    } else if (aux < 2020){\n                        return alert('Ingrese una tarjeta que no esté vencida')\n                    }\n                }\n            } \n\n            \n           // if (this.state.valorInicial == \"REGULAR\")\n            \n\n        }\n             \n        \n        await axios.post(modificar, {\n                    id: this.state.id,\n                    email: this.state.email,\n                    nombre: this.state.nombre,\n                    suscripcion: this.state.suscripcion,\n                    dni: this.state.dni,\n                    password:this.state.password,\n                }\n                , { headers: { 'xaccess': this.state.token } })\n                .then(res => {\n                    console.log(res.data)\n                    alert(JSON.stringify(res.data))\n                })\n                .catch(err => {\n                    alert(JSON.stringify(err.response.data.msg))\n                });\n\n    }\n   \n\n    render() {\n        return (\n            <div>\n            <div className=\"form-novedad\" >\n            <div className=\"col-md-6 offset-md-3\">\n             <div className=\"cardMS card-body text-light bg-dark\">\n\n             <form onSubmit={this.modificarSuscriptor} >\n\n             <div className=\"card-header\">\n\t\t\t\t    <h3>Mi Suscripción</h3>\n\t\t\t    </div>\n                <div className=\"form-group\">\n                <label className=\"text-light\">Nombre\n                </label>\n                <input \n                    className=\"form-control\" \n                    id=\"nombre\" \n                    name =\"nombre\"\n                    onChange={this.onInputChange}\n                    Value={this.state.nombre}\n                    placeholder=\"Ingrese su nombre\"\n                    required>\n                </input>    \n                </div>\n\n                <div className=\"form-group\">\n                <label className=\"text-light\">Email\n                </label>\n                <input \n                    className=\"form-control\" \n                    id=\"email\" \n                    name =\"email\"\n                    onChange={this.onInputChange}\n                    Value={this.state.email}\n                    placeholder=\"Ingrese su Email\"\n                    required\n                    >\n                </input>    \n                </div>\n               \n                \n                <div className=\"form-group\">\n                <label className=\"text-light\">DNI </label>\n                <input \n                    className=\"form-control\" \n                    id=\"dni\" \n                    name =\"dni\"\n                    onChange={this.onInputChange}\n                    value={this.state.dni}\n                    placeholder=\"Ingrese su DNI\"\n                    required>\n                </input>    \n            </div>\n\n                <div class=\"btn-group btn-group-toggle\" data-toggle=\"buttons\">\n                <label className=\"text-light\"> Su tipo de suscripción actual es {this.state.valorInicial}.</label>\n            \n                </div>\n           \n                        <div>\n                        \n                        <label className=\"text-light\">Si desea modificarla, ingrese la selección y los campos de la tarjeta nuevamente </label>\n                        <div class=\"btn-group btn-group-toggle\" data-toggle=\"buttons\">\n                        \n                        <label> <button type=\"button\" class=\"btn btn-outline-danger\" onClick={this.onInputChange} name=\"suscripcion\" value=\"REGULAR\" data-toggle=\"button\"> REGULAR</button> </label>\n                        <label> <button type=\"button\" class=\"btn btn-outline-danger\" onClick={this.onInputChange} name=\"suscripcion\" value=\"PREMIUM\" data-toggle=\"button\"> PREMIUM</button></label>\n                        \n                        </div>\n\n                        <div className=\"form-group\">\n                            <label className=\"text-light\">Número de tarjeta  </label>\n                            <input \n                                className=\"form-control\" \n                                id=\"numT\" \n                                name =\"numT\"\n                                onChange={this.onInputChange}\n                                value={this.state.numT}\n                                placeholder=\"Ingrese número de tarjeta, deberá contener 16 digitos\">\n                            </input>    \n                        </div>\n\n                        <div className=\"form-group\">\n                            <label className=\"text-light\">Codigo De Tarjeta\n                            </label>\n                            <input \n                                className=\"form-control\" \n                                id=\"codT\" \n                                name =\"codT\"\n                                onChange={this.onInputChange}\n                                value={this.state.codT}\n                                placeholder=\"Ingrese el codigo de su tajeta\">\n                            </input>    \n                        </div>\n                    </div>\n                   \n                  \n                    \n                \n                <div className=\"form-group\">\n                <label className=\"text-light\">Fecha de expiracion\n                </label>\n                <input \n                    type=\"number\"\n                    className=\"form-control\" \n                    id=\"mesE\" \n                    name =\"mesE\"\n                    onChange={this.onInputChange}\n                    value={this.state.mesE}\n                    placeholder=\"MES\">\n                </input>    \n                </div>\n                <input \n                    type=\"number\"\n                    className=\"form-control\" \n                    id=\"añoE\" \n                    name =\"añoE\"\n                    onChange={this.onInputChange}\n                    value={this.state.añoE}\n                    placeholder=\"AÑO\">\n                </input>    \n            \n\n            <div className=\"form-group\">\n                <label className=\"text-light\">Contraseña\n                </label>\n                <input \n                    className=\"form-control\" \n                    type=\"password\"\n                    id=\"password\" \n                    name =\"password\"\n                    onChange={this.onInputChange}\n                    Value=\"\"\n                    required\n                    placeholder=\"\"\n                    >\n                </input>    \n                \n            </div>\n         \n            \n            <div className=\"form-group\">\n                <button  type=\"submit\" className=\"btn btn-danger btn-lg btn-block \"\n                        >\n                    Modificar \n                </button>\n            </div>\n\n            </form>\n            </div>\n            </div>\n            </div>\n           \n\n        </div>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}